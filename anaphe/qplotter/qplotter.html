<html><head><title>User Manual</title><link rel="stylesheet" href="docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.25"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" id="c37a"><div class="titlepage"><h1 class="title"><a name="c37a"></a>User Manual</h1><h3 class="author">Paolo Rossi</h3><div class="affiliation"><span class="orgname">CERN IT/API<br></span></div><h3 class="author">Michel Platini</h3><p class="pubdate">Dec 2000</p><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>1. <a href="#C1Overview">Overview</a></dt><dd><dl><dt> <a href="#c37ab3b1">What is XXX?</a></dt><dt> <a href="#c37ab3b2">Title bla bla</a></dt></dl></dd><dt>2. <a href="#C2glance">XXX at a glance</a></dt><dd><dl><dt> <a href="#c37ab5b2">Fi=rst section of this chapter </a></dt><dt> <a href="#c37ab5b3">Another section</a></dt><dt> <a href="#c37ab5b4">Yet another section </a></dt><dd><dl><dt> <a href="#c37ab5b4b2">Subsection (order two, such as 2.4.1)</a></dt></dl></dd></dl></dd><dt>A. <a href="#SupportedCompilers">Supported compilers</a></dt><dt>B. <a href="#APPerformance">Performance</a></dt><dd><dl><dt> <a href="#c37ac10b1">Introduction</a></dt><dt> <a href="#c37ac10b2">Comparison</a></dt><dd><dl><dt> <a href="#c37ac10b2b1">Results of the benchmark</a></dt></dl></dd></dl></dd><dt>C. <a href="#APPrunexamples">Example including external file</a></dt><dd><dl><dt> <a href="#c37ac12b1">One dimensional histograms</a></dt><dd><dl><dt> <a href="#c37ac12b1b1">Input program</a></dt><dt> <a href="#c37ac12b1b2">Output Generated</a></dt></dl></dd></dl></dd></dl></div><div id="C1Overview" class="chapter"><div class="titlepage"><h2 class="title"><a name="C1Overview">1. Overview</a></h2></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt> <a href="#c37ab3b1">What is XXX?</a></dt><dt> <a href="#c37ab3b2">Title bla bla</a></dt></dl></div><div id="c37ab3b1" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ab3b1"></a><span class="title">What is XXX?</span></h2></div><p>
<div class="table"><p><a name="tab-hbook"></a><b>Table 1.1.  routines and their equivalent</b></p><table summary=" routines and their equivalent" border="1"><colgroup><col><col></colgroup><tbody><tr><td><i> name</i></td><td><i> equivalent</i></td></tr><tr><td>HBOOK1</td><td><tt>Histo1D</tt></td></tr><tr><td>HBOOK2</td><td><tt>Histo2D</tt></td></tr><tr><td>HFILL </td><td><tt>fill</tt> method </td></tr><tr><td>HPRINT</td><td><tt>print</tt> method</td></tr></tbody></table></div>
</p><div class="itemizedlist"><ul><li><a name="c37ab3b1b3a"></a><p>item 1;</p></li><li><a name="c37ab3b1b3b1"></a><p>item 2;</p></li></ul></div></div><div id="c37ab3b2" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ab3b2"></a><span class="title">Title bla bla</span></h2></div><p>
More bla bla bbla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla 
bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla 
bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla 
bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla la bla 
</p></div></div><div id="C2glance" class="chapter"><div class="titlepage"><h2 class="title"><a name="C2glance">2. XXX at a glance</a></h2></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt> <a href="#c37ab5b2">Fi=rst section of this chapter </a></dt><dt> <a href="#c37ab5b3">Another section</a></dt><dt> <a href="#c37ab5b4">Yet another section </a></dt><dd><dl><dt> <a href="#c37ab5b4b2">Subsection (order two, such as 2.4.1)</a></dt></dl></dd></dl></div><p>
This chapter provides an overview of XXX features.  
A description of these examples can be found in Appendix 
<a href="#APPrunexamples">Appendix C.</a>.
</p><div id="c37ab5b2" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ab5b2"></a><span class="title">Fi=rst section of this chapter </span></h2></div><p>
The following code snippet illustrates how to include it...
</p><pre class="programlisting">
#include "HTL/PHistograms.h" // Persistent histograms.
...
// Filling
 double x, w = 0.5;
 for( long i=0; i&lt;50000; i++ ) {
  x = -i*sin(float(i));
  histo->fill(x,w);
  histo2->fill(x,x,w);
 }
\
</pre><p>
The current implementation defined this footnote <sup>[<a name="c37ab5b2b3b1" href="#ftn.c37ab5b2b3b1">1</a>]</sup>
</p><p>
In the following, it
is assumed that the reader is familiar with the basic concepts 
of mixing text and footnotes.
</p><p>
Consider the following code fragment with two lines of code and some
standard text in between:
</p><pre class="programlisting">
HepRef(PHisto1D) histo1 = new ...
</pre><p>standard text</p><pre class="programlisting">
PHisto1D *histo1 = new ...
</pre><p>
In this piece of code, <tt>HepRef</tt> is a smart pointer to
a persistent histogram.
</p></div><div id="c37ab5b3" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ab5b3"></a><span class="title">Another section</span></h2></div><p>
This is how to use ordered lists:
</p><div class="orderedlist"><ol type="1"><li><a name="c37ab5b3b2a"></a><p>ordered item 1</p></li><li><a name="c37ab5b3b2b1"></a><p>oredered item 2</p></li></ol></div><p>This is an example of &#8220;A quote&#8221;</p></div><div id="c37ab5b4" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ab5b4"></a><span class="title">Yet another section </span></h2></div><p>
Now let's see subsections
</p><div id="c37ab5b4b2" class="sect2"><div class="titlepage"><h3 class="title"><a name="c37ab5b4b2"></a><span class="title">Subsection (order two, such as 2.4.1)</span></h3></div><p>
An example on how to use variable lists
</p><div class="variablelist"><dl><dt><a name="c37ab5b4b2b2a"></a><span class="term"><tt>MyClass</tt></span></dt><dd><p>User class with <tt>Class B</tt> embedded class;</p></dd><dt><a name="c37ab5b4b2b2b1"></a><span class="term"><tt>VeryLoooooooooooooooooooong</tt></span></dt><dd><p>Very long class name;</p></dd></dl></div></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p>Footnote with
<i>emphasized text</i> .</p></div></div></div><div id="SupportedCompilers" class="appendix"><div class="titlepage"><h2 class="title"><a name="SupportedCompilers">A. Supported compilers</a></h2></div><p>
The list of supported compilers on a given platform follows.
</p><div class="variablelist"><dl><dt><a name="c37ab8b2a"></a><span class="term">Solaris</span></dt><dd><p>CC 4.2</p></dd><dt><a name="c37ab8b2b1"></a><span class="term">HP-UX</span></dt><dd><p>aCC A.01.15</p></dd><dt><a name="c37ab8b2b2"></a><span class="term">Linux</span></dt><dd><p>egcs 1.1.2 </p></dd></dl></div></div><div id="APPerformance" class="appendix"><div class="titlepage"><h2 class="title"><a name="APPerformance">B. Performance</a></h2></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt> <a href="#c37ac10b1">Introduction</a></dt><dt> <a href="#c37ac10b2">Comparison</a></dt><dd><dl><dt> <a href="#c37ac10b2b1">Results of the benchmark</a></dt></dl></dd></dl></div><div id="c37ac10b1" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ac10b1"></a><span class="title">Introduction</span></h2></div><p>
This is an example of emphasizing user input such as shell commands
</p><pre class="programlisting">
<b><tt>cp -r /afs/cern.ch/sw/lhcxx/HTL/dev/HTL/examples .</tt></b>
<b><tt>cd examples</tt></b>
<b><tt>gmake</tt></b>
</pre></div><div id="c37ac10b2" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ac10b2"></a><span class="title">Comparison</span></h2></div><div id="c37ac10b2b1" class="sect2"><div class="titlepage"><h3 class="title"><a name="c37ac10b2b1"></a><span class="title">Results of the benchmark</span></h3></div><p>
The target machine used for the test was a Sparc Ultra:
</p><pre class="programlisting">
SunOS sunasd1 5.5.1 Generic_103640-12 sun4u sparc SUNW,Ultra-30
</pre><p>
The results are summarised in the table below.
</p><p>
<div class="informaltable" id="c37ac10b2b1b4b1"><p></p><a name="c37ac10b2b1b4b1"></a><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Old</td><td>860 ms</td></tr><tr><td>New</td><td>790 ms</td></tr><tr><td>Newer</td><td>3600 ms</td></tr></tbody></table><p></p></div>
</p></div></div></div><div id="APPrunexamples" class="appendix"><div class="titlepage"><h2 class="title"><a name="APPrunexamples">C. Example including external file</a></h2></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt> <a href="#c37ac12b1">One dimensional histograms</a></dt><dd><dl><dt> <a href="#c37ac12b1b1">Input program</a></dt><dt> <a href="#c37ac12b1b2">Output Generated</a></dt></dl></dd></dl></div><div id="c37ac12b1" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="c37ac12b1"></a><span class="title">One dimensional histograms</span></h2></div><div id="c37ac12b1b1" class="sect2"><div class="titlepage"><h3 class="title"><a name="c37ac12b1b1"></a><span class="title">Input program</span></h3></div><pre class="programlisting">
/* create_Histo1D.cpp */
#include &lt;iostream.h>
#include &lt;iomanip.h> 		// Formatting output string.
#include "HTL/PHistograms.h"
class Histo_App : public HepDbApplication
{
public:
	Histo_App( const char *a_db_name = 0 )
	{ db_name_ = ( a_db_name == 0 ) ? "Default_DB" : a_db_name; }
		// If no database name is provided then the default one is 
		// "Default_DB".
public:
	void run();
		// Create a 1D histo named "Histo 1D" and fill it.
		// Print simple properties and global statistics.
public:
	void init();
private:
	ooHandle(ooDBObj) db_; // Handle on the database.
	const char *db_name_; // Name of the database.
};
//
// Implementation:
//
void Histo_App::init()
{
	Init();
	startUpdate();
	db_ = db(db_name_);
}
void Histo_App::run()
{
	const Size bin_count = 20;
	const double x_min = 0.0;
	const double x_max = 20.0;
	// Create a histo 1D using Weighted_Bin and Even_Partition:
	// (The type of the points is double.)
	//
	HepRef(PHisto1D) histo = new (db_) PHisto1D( "Histo_1D", bin_count, x_min, x_max );
	// Let's fill the histo with 50000 points:
	//
	long i;
	double x, w;
	for( i=0; i&lt;50000; i++ ) {
		x = (i % 22) - 1;
		w = (x-9.5)*(x-9.5)+3;
		histo->fill(x,w);
	}
	// Let's print some properties of the new histo:
	//
	cout &lt;&lt; "Histo name: " &lt;&lt; histo->name() &lt;&lt; endl
		&lt;&lt; "Bin count : " &lt;&lt; histo->bin_count()
		&lt;&lt; " from " &lt;&lt; histo->partition().lower_point()
		&lt;&lt; " to " &lt;&lt; histo->partition().upper_point() &lt;&lt; endl &lt;&lt; endl;
	// Now display some statistics:
	//
	long in_entries = HStat::in_range_entries_count(*histo);
	long extra_entries = HStat::extra_entries_count(*histo);
	cout &lt;&lt; "Entries count: " &lt;&lt; (in_entries + extra_entries)
		&lt;&lt; " with IN_RANGE: " &lt;&lt; in_entries
		&lt;&lt; " EXTRA: " &lt;&lt; extra_entries &lt;&lt; endl;
	//double mean = HStat::mean( *histo );
	//cout &lt;&lt; "MEAN (B.C.): " &lt;&lt; mean &lt;&lt; endl;
	//cout &lt;&lt; "RMS  (B.C.): " &lt;&lt; HStat::rms(*histo, mean)
	//	&lt;&lt; endl &lt;&lt; endl;
	cout &lt;&lt; "MEAN (B.C.): " &lt;&lt; histo->mean() &lt;&lt; endl;
	cout &lt;&lt; "RMS  (B.C.): " &lt;&lt; histo->rms() &lt;&lt; endl;
	// Print histo contents:
	//
	cout &lt;&lt; ". UNDERFLOW: " &lt;&lt; histo->extra_bin(H_UNDERFLOW).value();
	for( i=0; i&lt;histo->bin_count(); i++ ) {
		cout &lt;&lt; endl &lt;&lt; ". " &lt;&lt; setw(2) &lt;&lt; i &lt;&lt; ": "
			&lt;&lt; setw(9) &lt;&lt; histo->i_bin(i).value() &lt;&lt; " +/- "
			&lt;&lt; setw(4) &lt;&lt; histo->i_bin(i).error();
	}
	cout &lt;&lt; endl &lt;&lt; ". OVERFLOW: " &lt;&lt; histo->extra_bin(H_OVERFLOW).value();
	cout &lt;&lt; endl &lt;&lt;  "TOTAL IN_RANGE: " 
		&lt;&lt; HInfo::in_range_value( *histo ) &lt;&lt; endl &lt;&lt; endl;
	// Print histo with existing HPrinter class from the library:
	//
	HPrinter hp( cout );
	hp.print( *histo );
}
int main( int argc, char **argv )
{
	Histo_App app;
	app.init();
	app.run();
	app.commit();
}

</pre></div><div id="c37ac12b1b2" class="sect2"><div class="titlepage"><h3 class="title"><a name="c37ac12b1b2"></a><span class="title">Output Generated</span></h3></div><div class="informalexample" id="c37ac12b1b2b1"><p></p><a name="c37ac12b1b2b1"></a><pre class="programlisting">
Histo name: Histo_1D
Bin count : 20 from 0 to 20
Entries count: 50000 with IN_RANGE: 45455 EXTRA: 4545
MEAN (B.C.): 9.49851
RMS  (B.C.): 7.58048
. UNDERFLOW: 257417
.  0:    211957 +/- 4445.79
.  1:    171043 +/- 3587.62
.  2:    134675 +/- 2824.8
.  3:    102853 +/- 2157.34
.  4:   75577.2 +/- 1585.23
.  5:   52847.2 +/- 1108.47
.  6:   34663.2 +/- 727.059
.  7:   21025.2 +/- 441.003
.  8:   11933.2 +/- 250.299
.  9:   7387.25 +/- 154.947
. 10:   7387.25 +/- 154.947
. 11:   11933.2 +/- 250.299
. 12:   21025.2 +/- 441.003
. 13:   34663.2 +/- 727.059
. 14:   52847.2 +/- 1108.47
. 15:     75544 +/- 1584.88
. 16:    102808 +/- 2156.86
. 17:    134616 +/- 2824.18
. 18:    170968 +/- 3586.83
. 19:    211864 +/- 4444.81
. OVERFLOW: 257304
TOTAL IN_RANGE: 1.64762e+06
TYPE       : Histo1D
TITLE      : Histo_1D
BIN COUNT  : 20
BIN WIDTH  : 1
                           7.39e+03                        2.12e+05 Y
X POSITION   BIN       VALUE|--------------------------------------------------->
 0.000e+00   0     2.120e+05|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 1.000e+00   1     1.710e+05|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 2.000e+00   2     1.347e+05|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 3.000e+00   3     1.029e+05|XXXXXXXXXXXXXXXXXXXXXXX
 4.000e+00   4     7.558e+04|XXXXXXXXXXXXXXXXX
 5.000e+00   5     5.285e+04|XXXXXXXXXXX
 6.000e+00   6     3.466e+04|XXXXXX
 7.000e+00   7     2.103e+04|XXX
 8.000e+00   8     1.193e+04|X
 9.000e+00   9     7.387e+03|
 1.000e+01   10    7.387e+03|
 1.100e+01   11    1.193e+04|X
 1.200e+01   12    2.103e+04|XXX
 1.300e+01   13    3.466e+04|XXXXXX
 1.400e+01   14    5.285e+04|XXXXXXXXXXX
 1.500e+01   15    7.554e+04|XXXXXXXXXXXXXXXX
 1.600e+01   16    1.028e+05|XXXXXXXXXXXXXXXXXXXXXXX
 1.700e+01   17    1.346e+05|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 1.800e+01   18    1.710e+05|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 1.900e+01   19    2.119e+05|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
                         X |
                           V
UNDERFLOW :  2.574e+05 OVERFLOW :  2.573e+05
 IN RANGE :      45455 EXTRA    :       4545
 MEAN B.C.:  9.499e+00 RMS B.C. :  7.580e+00




</pre><p></p></div></div></div></div></div></body></html>