<?.*****************************************************************>
<?.* PAW   User's Guide - Part 1  --- Examples chapter             *>
<?.*  Last Mod.   10 Nov 1989  17.30   mg                          *>
<?.*****************************************************************>
<H1 STITLE="Paw by examples">PAW by examples
<P>
This chapter shows how to use the basic functionality of the
PAW system with the help of a series of simple examples. It is
advisable to step through the complete series since most entries
use information from examples upstream.
<P>The so called <HP2>command mode</HP2>, available on all systems,
is used throughout this chapter.
For more details on other possible dialog modes, see Part 2.
<I1>user interface
<I1>command mode
<?.sk>
<LBLBOX>List of the examples in this chapter
<OL COMPACT>
<LI>Simple vector commands
<LI>Further vector commands and writing vectors to disk
<LI>Various data representations
<LI>Difference between VECTOR/DRAW and VECTOR/PLOT
<LI>Vector operations
<LI>Simple macro with loop and vector fit
<LI>Plotting one-dimensional functions
<LI>One-dimensional functions and loops
<LI>Plotting two-dimensional functions
<LI>Plotting a two-dimensional function specified in a external file
<LI>Creation of one- and two-dimensional histograms
<LI>Reading histograms on an external file
<LI>One-dimensional plotting and histogram operations
<LI>Two-dimensional data representations
<LI>The use of sub-ranges in histogram specifiers
<LI>Ntuples - Creation and output to a file
<LI>Ntuples - Automatic and user binning
<LI>Ntuples - A first look at selection criteria
<LI>Ntuples - Masks and loop
<LI>Ntuples - Using cuts
<LI>Ntuples - Two dimensional data representation
<LI>Using the SIGMA processor - Trigonometric functions
<LI>Using the SIGMA processor - More complex examples
<LI>Histogram operations (Keep and Update)
<LI>Merging several pictures into one plot
<LI>Pie charts with hatch styles and PostScript colour simulation
<LI>A complex graph with PAW
<LI>Making slides with PAW using PostScript
</OL>
</LBLBOX>
<P>
<NOTEL>
<LI>The files needed for these examples are available
in the PAW account on the various machines (see <HDREF REFID=PACCESS>).
<DL COMPACT>
<DT>VM/CMS
<DD><XPH>PAWEX* KUMAC</XPH> on the <XPH>PAW 201</XPH> minidisk
<?.BR>All text files must be created with <XPH>RECFM=F,LRECL=80</XPH>.
<DT>VAX/VMS
<DD><XPH>DISK$DL&colon;&lsqb;PAW.PAWMANUAL&rsqb;PAWEX*.KUMAC</XPH>
<DT>Apollo
<DD><XPH>/user/paw/pawmanual/pawex*.kumac</XPH>
</DL>
<LI>The pictures shown in the present chapter have been produced using
the HIGZ/PostScript metafile <XPH><HP2>-111</HP2></XPH>. What is
actually displayed on the screen when running a given example, 
might be slightly different, depending
on the workstation type specified at PAW initialisation.
For example the fill area style index <XPH><HP2>-3</HP2></XPH>
is frequently used (<XPH><HP2>SET HTYP -3</HP2></XPH>).
It displays a grey shadowing on the pictures, but will look
different on the screen. The same remark applies to line-widths and -styles.
<I1>hatch style
</NOTEL>
<?.PA>
<H2>Vectors and elementary operations
<P>The aim of the present section is to introduce the
basic syntax of PAW. It assumes that the user has
already succeeded to login
to the PAW system and that PAW is waiting for input.
<I1>vector
<I1>vector
<I1>case sensitivity
<I1>comment
<I2>star
<I2>*
<I2>vertical bar
<I2>|
<FIG ID=TUTEX1 place=inline frame=box >
<FIGCAP>Simple vector commands
<XMP SCALE=0.7>
    PAW > ***********************************************************************
    PAW > *                          TUTORIAL EXAMPLE PAWEX1                    *
    PAW > * Some simple vector commands                                         *
    PAW > * Lines starting with a * are comments and are ignored by PAW         *
    PAW > ***********************************************************************
    PAW >                             | similarly everything following a VERTICAL BAR is ignored
    PAW >                             | so this character can be used to provide INLINE COMMENTS
    PAW > <HP3>vector/create VECT1(10)</HP3>                                   | Create vector VECT1 with 10 elements
    PAW > <HP3>vector/input VECT1 10 8 6 4 2 3 5 7 9 11</HP3>                  | Input the values of the 10 elements
    PAW >                             | ****  PAW commands are NOT CASE SENSITIVE
    PAW > <HP3>VECTOR/CREATE VX(20) R 1. 2. 3. 4. 5. 6.</HP3> _                | Underscore _ is continuation character
    PAW >_<HP3>7. 8. 9. 10. 11. 12. 13. 14. 15. 16. 17. 18. 19. 20.</HP3>
    PAW > <HP3>VECTOR/create VY(20) R 1.1 3.2 5.3 7.4 7.5</HP3> _
    PAW >_<HP3>6.6 4.3 2.1 6.6 11.1 16.2 18.3 19.0 17.8 16.0 12.1 9.1 6.1 3.1 6.6</HP3>
    PAW > <HP3>zone 1 2</HP3>                                                  | 2 pictures on the same page
    PAW > <HP3>set HTYP -3</HP3>                                               | Set hatch style for histogram
    PAW > <HP3>vector/draw VECT1</HP3>                                         | Draw the contents of vector VECT1
    PAW > <HP3>GRAPH 20 VX VY</HP3>                                            | Graph VX and VY (defaults)
    PAW > <HP3>igset mtyp 21</HP3>                                             | Set HIGZ polymarker
    PAW > <HP3>GRAPH 20 VX VY P</HP3>                                          | Graph VX and VY with polymarker
    PAW > <HP3>set DMOD 2</HP3>                                                | Change line style
    PAW > <HP3>GRAPH 20 VX VY C</HP3>                                          | Graph VX and VY (using splines)
    PAW > <HP3>set DMOD 0</HP3>                                                | Reset line style
    PAW > <HP3>vector/delete *</HP3>                                           | Delete vectors
    PAW > <HP3>zone</HP3>                                                      | Reset picture layout
</XMP>
<ARTWORK NAME=TUTEX1 ALIGN=CENTER WIDTH=140mm TOPMAR=8mm>
</FIG>
<FIG ID=TUTEX2 frame=box>
<FIGCAP>Further vector commands and writing vectors to disk
<XMP SCALE=0.9>
<I2>underscore
<I2>_
<I1>subarray
<I2>:
<I2>colon
<I1>placeholder
<I2>exclamation mark
<I2>!
<I1>abbreviation
<I1>command abbreviation
   PAW > **************************************************************************
   PAW > *                      TUTORIAL EXAMPLE PAWEX2                           *
   PAW > * Example showing further vector commands                                *
   PAW > **************************************************************************
   PAW > <HP3>size 20 18</HP3> _                                | Set picture size
   PAW > <HP3>vector/create VECT(10,3) R</HP3> _                | Create a 2 dimensional vector VECT
   PAW >_<HP3>1. 2. 3. 4. 5. 6. 7. 8. 9. 10.</HP3> _
   PAW >_<HP3>9.1 8.1 7.1 6.1 5.1 4.1 3.1 2.1 1.1 0.1</HP3> _
   PAW >_<HP3>6.2 4.2 3.2 2.2 1.2 1.2 2.2 3.2 4.2 5.2</HP3>
   PAW > <HP3>VECTOR/CREATE VECT1(10) R</HP3> _                 | Create a one-dimensional vector VECT1
   PAW >_<HP3>1.1 2.2 3.3 4.4 5.5 6.6 5.5 4.4 3.3 2.2</HP3>     | Input the values of the 10 elements
   PAW > * PAW commands can be ABBREVIATED to their shortest non-ambiguous form
   PAW > <HP3>set htyp -3</HP3>                                 | Define hatch style
   PAW > <HP3>ve/dr VECT(1:10,3)</HP3>                          | Draw contents of third row on VECT
   PAW > <HP3>set htyp 0</HP3>                                  | Reset hatch style
   PAW > <HP3>set hwid 12</HP3>                                 | Define histogram line width
   PAW > <HP3>ve/dr VECT(1:10,3) ! SC</HP3>                     | Once more third row on VECT, now as continuous curve
   PAW > <HP3>set dmod 13</HP3>                                 | Set line style
   PAW > <HP3>igset MTYP 29</HP3>                               | Define marker type
   PAW > <HP3>igset MSCF 3.</HP3>                               | Marker scale factor
   PAW > <HP3>set HWID 6</HP3>                                  | Redefine histogram line width
   PAW > <HP3>vector/draw VECT1 ! LPS</HP3>                     | Draw contents of VECT1 as line with marker
   PAW > * Notice the use of the EXCLAMATION MARK ! as a placeholder.
   PAW > * It indicates that the default should be taken for the omitted parameter.
   PAW > <HP3>ve/list</HP3>                                     | List vectors in order of creation
   Vector Name                       Type    Length    Dim-1    Dim-2    Dim-3
 
   VECT                                 R        30       10        3
   VECT1                                R        10       10
 
   Total of  2 Vector(s)
   PAW > <HP3>ve/write VECT 'vector.data' '(3(10f5.0,/))'</HP3> | Write VECT to text output file
   PAW > <HP3>ve/delete *</HP3>                                 | Delete all vectors in memory
</XMP>
<ARTWORK NAME=TUTEX2 ALIGN=CENTER DEPTH=120MM TOPMAR=4MM WIDTH=160MM>
</FIG>
<FIG ID=TUTEX3 frame=box >
<FIGCAP>Various data representations
<XMP>
<I1>zone
<I1>marker
   PAW > **************************************************************************
   PAW > *                      TUTORIAL EXAMPLE PAWEX3                           *
   PAW > * Example showing various possible data representation with VECTOR/DRAW  *
   PAW > **************************************************************************
   PAW > <HP3>zone 2 3</HP3>                                     | Divide picture page in 2 by 3 images
   PAW > <HP3>ve/create v(10) R 5 1 3 2 4 1 3 1 8 6</HP3>        | Create vector V
   PAW > <HP3>set htyp -3</HP3>                                  | Define hatch style
   PAW > <HP3>ve/draw v</HP3>                                    | Default plot
   PAW > <HP3>ve/draw v ! b</HP3>                                | Plot as bar chart
   PAW > <HP3>ve/draw v ! l</HP3>                                | Plot as lines
   PAW > <HP3>ve/draw v ! l*</HP3>                               | Lines and a star
   PAW > <HP3>ve/draw v ! bl*</HP3>                              |  and bar option
   PAW > <HP3>igset mtyp 21</HP3>                                | Choose HIGZ marker
   PAW > <HP3>ve/draw v ! e</HP3>                                | Plot error bars
   PAW > <HP3>ve/de V</HP3>                                      | Delete vector V
   PAW > <HP3>zone</HP3>                                         | Reset zone to default
</XMP>
<ARTWORK NAME=TUTEX3 ALIGN=CENTER DEPTH=170MM TOPMAR=5MM>
</FIG>
<FIG ID=TUTEX4 frame=box >
<FIGCAP>Difference between VECTOR/DRAW and VECTOR/PLOT
<XMP SCALE=0.94>
<I1>vector
<I2>draw
<I2>plot
<I1>histogram
<I2>creation
<I2>bar option
 PAW > **************************************************************************
 PAW > *                      TUTORIAL EXAMPLE PAWEX4                           *
 PAW > * Example which shows the difference between VECTOR/DRAW and VECTOR/PLOT *
 PAW > * It also shows the functionality of VECTOR/HFILL and PUT/CONTENTS       *
 PAW > **************************************************************************
 PAW > <HP3>zone 2 2</HP3>
 PAW > <HP3>ve/create VECT1(10) R 1 2 3 4 5 5 4 3 2 1</HP3>         | Create vector VECT1
 PAW > <HP3>set HTYP -3</HP3>                                       | Set hatch type dotted (PostScript)
 PAW > <HP3>ve/draw VECT1</HP3>                                     | Draw the contents of VECT1
 PAW > * PLOT interprets contents of vector elements as values to be histogrammed
 PAW > <HP3>set HCOL 1001</HP3>                                     | Black bars
 PAW > <HP3>ve/plot VECT1</HP3>                                     | PLOT contents into hist with 100 channels
 PAW > <HP3>set HTYP -3</HP3>                                       | Set hatch type dotted (PostScript)
 PAW > <HP3>create/1dhisto 100 'test vector/hfill' 5 1. 6.</HP3>    | Create a 1-dimensional histogram
 PAW > <HP3>MAX 100 2.5</HP3>                                       | Define maximum for hist 100
 PAW > <HP3>ve/hfill VECT1 100</HP3>                                | Fill hist 100 with vector values
 PAW > <HP3>histo/plot 100 B</HP3>                                  | Plot hist 100 (Bar option)
 PAW > <HP3>hi/de 100</HP3>                                         | Delete hist 100
 PAW > <HP3>create/1dhisto 100 'test put/contents' 10 1. 11.</HP3>  | Create a 1-dimensional histogram
 PAW > <HP3>MAX 100 5.5</HP3>                                       | Define maximum for hist 100
 PAW > <HP3>MIN 100 0.5</HP3>                                       | Define minimum for hist 100
 PAW > <HP3>put/contents 100 VECT1</HP3>                            | Fill contents of hist 100 with VECT1
 PAW > <HP3>histo/plot 100</HP3>                                    | Plot hist 100 (identical to VECTOR/DRAW)
 PAW > <HP3>ve/de VECT1</HP3>                                       | Delete VECT1
 PAW > <HP3>hi/de 100</HP3>                                         | Delete hist 100
 PAW > <HP3>zone</HP3>                                              | Reset zone
</XMP>
<ARTWORK NAME=TUTEX4 ALIGN=CENTER DEPTH=14CM TOPMAR=8MM>
</FIG>
<FIG ID=TUTEX5 frame=box >
<FIGCAP>Vector operations
<XMP>
<I1>vector operations
<I1>command abbreviation
<I1>hatch style
<I1>histogram
<I2>hatch style
<I1>wildcard
   PAW > **************************************************************************
   PAW > *                      TUTORIAL EXAMPLE PAWEX5                           *
   PAW > * Example showing vector operations. The resulting vectors are created   *
   PAW > * automatically.                                                         *
   PAW > **************************************************************************
   PAW > <HP3>zone 1 2 </HP3>
   PAW > <HP3>ve/create V1(10) R 1 2 3 4 5 5 4 3 2 1</HP3>            | Define vector V1 of 10 elements
   PAW > <HP3>vector/operations/vscale V1 0.5   V12</HP3>             | Divide V1 by 2 into V12
   PAW > <HP3>ve/op/vscale             V1 0.25  V14</HP3>             | Divide V1 by 4 into V14
   PAW > <HP3>set htyp 0</HP3>                                        | No hatch
   PAW > *   Differences between various plots are shown using different line styles
   PAW > <HP3>ve/dr V1</HP3>                                          | Draw V1
   PAW > <HP3>ve/dr V12 ! S</HP3>                                     | Draw V12 onto same graph
   PAW > <HP3>ve/dr V14 ! S</HP3>                                     |     ditto for V14
   PAW > <HP3>vsub                      V1 V14 V14M </HP3>            | Subtract V14 from V1 into V14M
   PAW > *   Differences between various plots are shown using different hatch styles
   PAW > <HP3>ve/dr V1</HP3>                                          | Draw V1
   PAW > <HP3>set htyp 344</HP3>                                      | Change hatch style
   PAW > <HP3>ve/dr V14M ! S</HP3>                                    | Draw V14M on same graph
   PAW > <HP3>set htyp 144</HP3>                                      | Change hatch style once more
   PAW > <HP3>ve/dr V12  ! S</HP3>                                    | Draw V12 on same graph
   PAW > <HP3>ve/de *</HP3>                                           | Delete all vectors in memory
   PAW > <HP3>zone</HP3>                                              | Reset zone
</XMP>
<ARTWORK NAME=TUTEX5 ALIGN=CENTER DEPTH=145MM TOPMAR=5MM>
</FIG>
<FIG ID=TUTEX6 frame=box >
<FIGCAP>Simple macro with loop and vector fit
<FIGSEG>
<XMP>
<i1>vector print
<I1>loop
<I2>if
<I2>goto
<I2>label
<I1>fit
   PAW > <HP3>EDIT PAWEX6</HP3>                                      | Edit MACRO PAWEX6.KUMAC
   MACRO PAWEX6
   **************************************************************************
   *                      TUTORIAL EXAMPLE PAWEX6                           *
   * Example showing a simple macro, with a loop and a VECTOR fit.          *
   **************************************************************************
   ve/create VECT(10,3)                                  | Create a 2 dimensional vector
   ve/read VECT 'vector.data'                            | Read vector values from external file
                                                         |  created in example PAWEX2
   ve/print VECT(1:10,3)                                 | Print last row of VECT (see Example 2)
   vbias vect(1:10,1) 0.5 vect(1:10,1)
   zone 1 2
   ip = 2                                                | Loop counter
   set htyp -3
   * Start of a <HP3>loop</HP3> over the three rows of vector VECT
   LOOP:                                                 |<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
     ve/draw VECT(1:10,&lsqb;ip&rsqb;)                             | draw next row                    |
     order = ip - 1                                      | Define order for fit             |
     ve/fit VECT(1:10,1) VECT(1:10,&lsqb;IP&rsqb;) ! P&lsqb;order&rsqb; WS   | Fit polynomial to given row      |
     ip = ip + 1                                         | Increment counter                |
     if ip &lt; 4        GOTO LOOP                          | loop test >>>>>>>>>>>>>>>>>>>>>>>>
   ve/delete VECT                                        | Delete VECT
   RETURN
</XMP>
<ARTWORK NAME=TUTEX6 ALIGN=CENTER DEPTH=145MM>
<FIGSEG>
<XMP SCALE=0.84>
   PAW > <HP3>TRACE</HP3>                                           | Trace the macro execution
   PAW > <HP3>EXEC PAWEX6</HP3>                                     | Execute Macro PAWEX6.KUMAC
      >>>>> ve/create VECT(10,3)
      >>>>> ve/read VECT 'vector.data'
      >>>>> ve/print VECT(1:10,3)
      VECT (    1 ) =   6.000000
      VECT (    2 ) =   4.000000
      VECT (    3 ) =   3.000000
      VECT (    4 ) =   2.000000
      VECT (    5 ) =   1.000000
      VECT (    6 ) =   1.000000
      VECT (    7 ) =   2.000000
      VECT (    8 ) =   3.000000
      VECT (    9 ) =   4.000000
      VECT (   10 ) =   5.000000
      >>>>> vbias vect(1:10,1) 0.5 vect(1:10,1)
      >>>>> zone 1 2
      >>>>> IP=2
      >>>>> set htyp -3
      >>>>> ve/draw VECT(1:10,2)
      >>>>> ORDER=1
      >>>>> ve/fit VECT(1:10,1) VECT(1:10,2) ! P1 WS
      MINUIT RELEASE 89.05b INITIALIZED.   DIMENSIONS 100/ 35  EPSMAC=  0.11E-18
      **********
      ***  1 ***SET EPS     0.10000E-05
      **********
      FLOATING-POINT NUMBERS ASSUMED ACCURATE TO   0.100E-05
          **********************************************
          *                                            *
          * Function minimization by SUBROUTINE HFITV  *
          * Variable-metric method                     *
          * ID =          0  CHOPT = WS                *
          *                                            *
          **********************************************
      Convergence when estimated distance to minimum (EDM) .LT.  0.10E-03
 
      FCN=  0.0000000     FROM MIGRAD    STATUS=CONVERGED  CALLS=   18 EDM=  0.88E-11
                          STRATEGY= 1    ERROR DEF=    1.0000
 
      INT EXT  PARAMETER                                   STEP         FIRST
      NO. NO.    NAME        VALUE          ERROR          SIZE      DERIVATIVE
        1  1  P1            10.500       0.73236       0.10000       0.00000
        2  2  P2           -1.0000       0.11010       0.15033E-01  -0.38147E-04
 
      CHISQUARE = 0.0000E+00  NPFIT =   10
 
      >>>>> IP=3
      >>>>> ve/draw VECT(1:10,3)
      >>>>> ORDER=2
      >>>>> ve/fit VECT(1:10,1) VECT(1:10,3) ! P2 WS
          **********************************************
          *                                            *
          * Function minimization by SUBROUTINE HFITV  *
          * Variable-metric method                     *
          * ID =          0  CHOPT = WS                *
          *                                            *
          **********************************************
      Convergence when estimated distance to minimum (EDM) .LT.  0.10E-03
 
      FCN=  0.8969682     FROM MIGRAD    STATUS=CONVERGED  CALLS=   47 EDM=  0.36E-09
                          STRATEGY= 1    ERROR DEF=    1.0000
 
      INT EXT  PARAMETER                                   STEP         FIRST
      NO. NO.    NAME        VALUE          ERROR          SIZE      DERIVATIVE
        1  1  P1            9.3136        1.4106       0.10000       0.95368E-05
        2  2  P2           -2.6000       0.53292       0.15033E-01   0.19392E-03
        3  3  P3           0.21212       0.43457E-01   0.17681E-02   0.15594E-02
 
      CHISQUARE = 0.1281E+00  NPFIT =   10
 
      >>>>> IP=4
      >>>>> ve/delete VECT
</XMP>
</FIG>
<?.PA>
<H2>One and two-dimensional functions
<P>PAW allows the plotting of <HP2>functions</HP2>. A function can be
<I1>function
<I1>COMIS
specified on the command line, or in an external
file, which is read by the FORTRAN interpreter <HP2>COMIS</HP2>.
<FIG ID=TUTEX7 frame=box PLACE=INLINE>
<FIGCAP>Plotting one-dimensional functions
<XMP SCALE=0.9>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX7                           *
  PAW > * Plot a few one-dimensional trigonometric functions                     *
  PAW > **************************************************************************
  PAW > <HP3>opt utit</HP3>                                            | No title on histogram
  PAW > <HP3>opt grid</HP3>                                            | Put a grid on the plot
  PAW > <HP3>func/plot x*sin(x)*exp(-0.1*x)  -10. 10.</HP3>            | Plot first function
  PAW > <HP3>set dmod 2</HP3>                                          | Set new line style
  PAW > <HP3>func/plot (sin(x)+cos(x))**5    -10. 10. s</HP3>          | Plot second function on same plot
  PAW > <HP3>set dmod 3</HP3>                                          | Set new line style
  PAW > <HP3>func/plot (sin(x)/(x)-x*cos(x)) -10. 10. s</HP3>          | Plot third function on same plot
  PAW > <HP3>set dmod 1</HP3>                                          | Reset line style
  PAW > <HP3>opt htit</HP3>                                            | Reset to histogram title
  PAW > <HP3>opt ngri</HP3>                                            | No grid
</XMP>
<ARTWORK NAME=TUTEX7 ALIGN=CENTER WIDTH=150MM TOPMAR=8MM>
</FIG>
<FIG ID=TUTEX8 frame=box >
<FIGCAP>One-dimensional functions and loops
<XMP SCALE=0.9>
<I1>loop
<I1>tick marks
<I1>label
<I1>macro parameter
  PAW > <HP3>edit pawex8</HP3>                                   | Look at the Macro file
  MACRO PAWEX8  1=8
  **************************************************************************
  *                      TUTORIAL EXAMPLE PAWEX8                           *
  * Plot a one-dimensional function and loop                               *
  * The Macro parameter is the number of plot to draw on the picture       *
  * The defaults is 8                                                      *
  **************************************************************************
  set DMOD 1                                            | Fix line style to 1
  set XTIC 0.0001                                       | No tickmarks in X
  set YTIC 0.0001                                       | No tickmarks in Y
  set XVAL 100.                                         | No values on Y axis
  set YVAL 100.                                         | No values on X axis
  OPT utit                                              | No title on histogram
  FUN/PLOT X*SIN(X) -10 10                              | Plot first function
  FUN/PLOT X*COS(X)*SIN(X) -10 10 S                     | Plot second function
  A=&lsqb;1&rsqb;-1                                               | Initialise loop variable
  LOOP:                                                 | Start of loop <<<<<<<<<
    FUN/PLOT X*SIN(X)*&lsqb;A&rsqb;/&lsqb;1&rsqb; -10 10 S                  | Next plot             |
    FUN/PLOT X*COS(X)*SIN(X)*&lsqb;A&rsqb;/&lsqb;1&rsqb; -10 10 S           | Next plot             |
  A=&lsqb;A&rsqb;-1                                               | Update loop variable  |
  IF &lsqb;A&rsqb;>0 GOTO LOOP                                    | End of loop >>>>>>>>>>>
  RETURN
  PAW > <HP3>EXEC pawex8 12</HP3>                       | Execute Macro file with first parameter = 12
  PAW > <HP3>opt htit</HP3>                                            | Reset to histogram title
</XMP>
<ARTWORK NAME=TUTEX8 ALIGN=CENTER DEPTH=145MM TOPMAR=7mm>
</FIG>
<FIG ID=TUTEX9 frame=box >
<FIGCAP>Plotting two-dimensional functions
<XMP>
<I1>function (2-dimensional)
<I1>FUN2
<I1>contour plot
<I1>surface plot
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX9                           *
  PAW > * Plot two-dimensional functions                                         *
  PAW > **************************************************************************
  PAW > <HP3>zone 2 2</HP3>                                              | Divide picture in two by two
  PAW > <HP3>FUN2  10 abs(sin(x)/x)*(cos(y)*y)*2))</HP3> _               | First 2-dim function using
  PAW >_<HP3>       40 -6.28 6.28 40 -6.28 6.28 </HP3>                   |  surface plot representation
  PAW > <HP3>contour 10 40 0</HP3>                                       | Contour plot representation
  PAW > <HP3>hi/de 10</HP3>                                              | Delete histogram 10
  PAW > <HP3>FUN2  10 x*sin(x)*y*sin(y) 40 -10. 10. 40 -10. 10. C</HP3>  | Second 2-dim function
  PAW > <HP3>surf 10</HP3>                                               | Surface plot representation
  PAW > <HP3>hi/de 10</HP3>                                              | Delete histogram 10
</XMP>
<ARTWORK NAME=TUTEX9 ALIGN=CENTER DEPTH=172MM TOPMAR=5MM>
</FIG>
<FIG ID=TUTEX10 frame=box >
<FIGCAP>Plotting a two-dimensional function specified in a external file
<XMP>
<I1>COMIS
<I1>FORTRAN interpreter
<I1>metafile
<I1>BOX option
<I1>PostScript
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX10                          *
  PAW > * Calculate and plot (BOX option) Mandelbrot distribution                *
  PAW > **************************************************************************
  PAW > <HP3>edit mandel.ftn</HP3>                                   | Look at FORTRAN function
        REAL FUNCTION MANDEL(XP)
        DIMENSION XP(2)
        DATA NMAX/30/
        X=XP(1)
        Y=XP(2)
        XX=0.
        YY=0.
              DO 30 N=1,NMAX
                 TT=XX*XX-YY*YY+X
                 YY=2.*XX*YY+Y
                 XX=TT
                 IF (4..LT.XX*XX+YY*YY) GO TO 1
     30       CONTINUE
      1       MANDEL=FLOAT(N)/FLOAT(NMAX)
        END
  PAW > <HP3>fun2 10 mandel.ftn 100 -2.4 .8 100 -1.2 1.2</HP3>       | Calculate function and plot
  PAW > <HP3>fortran/file 66 mandel.ps</HP3>                         | Open <Q>metafile</Q> for PostScript image
  PAW > <HP3>metafile 66 -111</HP3>                                  | HIGZ/PostScript portrait mode
  PAW > <HP3>hi/pl 10 BOX</HP3>                                      | Plot histogram with BOX option
  PAW > <HP3>close 66</HP3>                                          | Close metafile
</XMP>
<ARTWORK NAME=TUTEX10 ALIGN=CENTER DEPTH=14CM>
</FIG>
<?.PA>
<H2>Using histograms
<FIG ID=TUTEX11 frame=box PLACE=INLINE>
<FIGCAP>Creation of one- and two-dimensional histograms
<XMP SCALE=0.6>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX11                          *
  PAW > * Creation of one and two-dimensional histograms                         *
  PAW > **************************************************************************
  PAW > <HP3>edit htfun1.ftn</HP3>                                      | Look at FORTRAN function
<I1>function
<I1>comis
<I1>user routine
<I1>output histogram
<I1>create histogram
        FUNCTION HTFUN1(X)
        DATA C1,C2,XM1,XM2,XS1,XS2/1.,0.5,0.3,0.7,0.07,0.12/
        A1=-0.5*((X-XM1)/XS1)**2
        A2=-0.5*((X-XM2)/XS2)**2
        X1=C1
        X2=C2
        IF(ABS(A1).GT.1.E-4)X1=C1*EXP(A1)
        IF(ABS(A2).GT.1.E-4)X2=C2*EXP(A2)
        HTFUN1=X1+X2
        END
        FUNCTION HTFUN2(X,Y)
        HTFUN2=HTFUN1(X)*HTFUN1(Y)
        END
  PAW > <HP3>edit urout.ftn</HP3>                                        | Edit COMIS Fortran routine
        SUBROUTINE UROUT(NEV)
        DO 10 I=1,NEV
            X=HRNDM1(100,I)
            CALL HFILL(110,X,0.,1.)
     10 CONTINUE
        END
  PAW > <HP3>opt GRID</HP3>                                              | Add grid to plot
  PAW > <HP3>zone 1 2</HP3>                                              | Divide plot in two
  PAW > * Read functions from file htfun1.ftn into memory, fill 1-dimensional histogram 100 according to 1-dim function htfun1 and plot
  PAW > <HP3>fun1 100 htfun1.ftn 100. 0. 1.</HP3>
  PAW > <HP3>1dhisto  110 'Test 1-dim Histo' 100 0. 1. 1000.</HP3>       | Create a 1-dimensional histogram
  PAW > <HP3>call urout.ftn(5000)</HP3>                                  | Fill histogram 110 according to function 100 (5000 events)
  PAW > * Fill and plot as a contour 2-dimensional histogram 200 according to the 2-dim function htfun2 in memory
  PAW > <HP3>fun2 200 htfun2 25. 0. 1. 25. 0. 1. C</HP3>
  PAW > <HP3>hi/li</HP3>                                                 | List known histograms
         ===> Directory : //PAWC
                100 (1)   htfun1.ftn
                110 (1)   Test 1-dim Histo
                200 (2)   htfun2
  PAW > <HP3>histogram/file 1 pawhists.rzdat ! N</HP3>                   | Define output unit 1
  PAW > <HP3>hrout 0</HP3>                                               | Write all histograms
  PAW > <HP3>close 1</HP3>                                               | Close the output unit
  PAW > <HP3>hi/de 0</HP3>                                               | Delete all histograms in memory
</XMP>
<ARTWORK NAME=TUTEX11 ALIGN=CENTER DEPTH=120MM TOPMAR=4MM>
</FIG>
<FIG ID=TUTEX12 frame=box>
<FIGCAP>Reading histograms on an external file
<XMP SCALE=0.7>
<I1>input histograms
<I1>list histograms
<I1>scatter plot
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX12                          *
  PAW > * Read histograms from file and plot                                     *
  PAW > **************************************************************************
  PAW > <HP3>histogram/file 1 pawhists.rzdat</HP3>                      | Open histogram file created in PAWEX11
  PAW > <HP3>hrin  *</HP3>                                              | Read all histograms from file
  PAW > <HP3>ldir</HP3>                                                 | List current directory
        ************** Directory ===> //LUN1 <===
 
                  Created 890915/1653  Modified 890917/1116
 
        ===> List of objects
            HBOOK-ID  CYCLE   DATE/TIME   NDATA   OFFSET    REC1    REC2
               100       1   890915/1653    152       1       3
               110       1   890915/1653     85     153       3
               200       1   890915/1653    779     238       3
 
         NUMBER OF RECORDS =    3  NUMBER OF MEGAWORDS =  0 +  3056 WORDS
         PER CENT OF DIRECTORY QUOTA USED =   0.075
         PER CENT OF FILE USED            =   0.075
         BLOCKING FACTOR                  =  66.146
  PAW > <HP3>hi/list</HP3>                                              | List histograms on file
        ===> Directory : //LUN1
               100 (1)   htfun1.ftn
               110 (1)   Test 1-dim Histo
               200 (2)   htfun2.ftn
  PAW > <HP3>opt GRID</HP3>                                             | Put a grid on the picture
  PAW > <HP3>zone 2 2</HP3>                                             | Divide picture in two by two parts
  PAW > <HP3>hi/pl 100</HP3>                                            | Plot histogram 100
  PAW > <HP3>set htyp -3</HP3>                                          | Choose hatch style
  PAW > <HP3>hi/pl 110</HP3>                                            | Plot histogram 110 with option E
  PAW > <HP3>zone 1 2 2 'S'</HP3>                                       | Redefine zone
  PAW > <HP3>hi/plot 200</HP3>                                          | Plot 2-dim histogram 2 (Box option)
  PAW > <HP3>h/del 0</HP3>                                              | Delete histograms from memory
  PAW > <HP3>close 1</HP3>                                              | Close input unit
  PAW > <HP3>zone</HP3>                                                 | Reset zone
</XMP>
<ARTWORK NAME=TUTEX12 ALIGN=CENTER DEPTH=14CM>
</FIG>
<FIG ID=TUTEX13 frame=box PLACE=INLINE>
<FIGCAP>One-dimensional plotting and histogram operations
<XMP SCALE=0.8>
<I1>one dimensional data presentation
<I1>plotting<I2>E option
<I1>polymarker
<I1>plotting<I2>P and L options
<I1>hatch style
<I1>histogram
<I2>operations
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX13                          *
  PAW > * Perform operations on histograms read from file and save result        *
  PAW > **************************************************************************
  PAW > <HP3>histogram/file 1 pawhists.rzdat ! U</HP3>                   | Open histogram file
  PAW > <HP3>hrin  0</HP3>                                               | Read all histograms on file
  PAW > <HP3>zon 2 2</HP3>                                               | Divide picture in two by two parts
  PAW > <HP3>opt grid</HP3>                                              | Put a grid on the picture
  PAW > <HP3>igset mtyp 26</HP3>                                         | Polymarker
  PAW > <HP3>set KSIZ 0.2</HP3>                                          | Set size of polymarker (in cm)
  PAW > <HP3>hi/pl 110 e</HP3>                                           | Plot histo 110 with E option
  PAW > <HP3>hi/pl 110 pl</HP3>                                          | Plot histo 110 with polymarker
  PAW > <HP3>set CFON 2</HP3>                                            | Set font for comments
  PAW > <HP3>set CSIZ 0.4</HP3>                                          | Set size for comments (in cm)
  PAW > <HP3>key 0.5 130 26 '&lsqb;p&circ;+!,p&circ;-!,m&circ;+!,m&circ;-'</HP3>                  | Example of HIGZ software fonts
  PAW > <HP3>zon 1 2 2 s</HP3>                                           | Redefine picture layout
  PAW > <HP3>hi/op/add 110 110 120 0.5 0.</HP3>                          | Histogram 120 is half of 110
  PAW > <HP3>hi/op/add 110 110 130 0.25 0.</HP3>                         | Histogram 130 is quarter of 110
  PAW > <HP3>set htyp -3</HP3>                                           | Hatch style for histogram
  PAW > <HP3>hi/pl 110</HP3>                                             | Plot histogram 110
  PAW > <HP3>set htyp 444</HP3>                                          | Set hatch styles for histogram 120
  PAW > <HP3>hi/pl 120 s</HP3>                                           | Plot histogram 120 on same plot
  PAW > <HP3>set htyp 244</HP3>                                          | Set hatch styles for histogram 130
  PAW > <HP3>hi/pl 130 s</HP3>                                           | Plot histogram 120 on same plot
  PAW > <HP3>text 0.55 95. 'LEP Very Preliminary' 0.35 25.</HP3>         | Add text to plot
  PAW > <HP3>hrout 0</HP3>                                               | Write all histograms to the histogram file
  PAW > <HP3>close 1</HP3>                                               | Close input/output unit
</XMP>
<ARTWORK NAME=TUTEX13 ALIGN=CENTER DEPTH=15CM TOPMAR=8MM>
</FIG>
<FIG ID=TUTEX14 frame=box>
<FIGCAP>Two-dimensional data representations
<XMP SCALE=0.8>
<I1>two-dimensional data presentation
<I1>scatter plot (BOX option)
<I1>contour plot
<I1>block (lego) plot
<I1>surface plot
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX14                          *
  PAW > * Different representations of 2-dim histograms                          *
  PAW > **************************************************************************
  PAW > <HP3>histogram/file 1 pawhists.rzdat</HP3>               | Open histogram file created in PAWEX11, modified in PAWEX13
  PAW > <HP3>hrin  0</HP3>                                       | Read all histograms on file
  PAW > <HP3>hi/li</HP3>                                         | List histograms on file
        ===> Directory : //LUN1
               100 (1)   htfun1.ftn
               110 (1)   Test 1-dim Histo
               200 (2)   htfun2
               120 (1)   Test 1-dim Histo
               130 (1)   Test 1-dim Histo
  PAW > <HP3>close 1</HP3>                                       | Close input unit
  PAW > <HP3>opt UTIT</HP3>                                      | Turn off HBOOK titles
  PAW > <HP3>zone 2 2</HP3>                                      | Divide picture in two by two parts
  PAW > <HP3>hi/plot 200 BOX</HP3>                               | Plot histogram 200 with BOX option
  PAW > <HP3>contour 200 20 0</HP3>                              | Plot histogram 200 as contour plot
  PAW > <HP3>lego 200</HP3>                                      | Plot histogram 200 as lego plot
  PAW > <HP3>surf 200</HP3>                                      | Plot histogram 200 as surface plot
  PAW > <HP3>hi/del 0</HP3>                                      | Delete histograms in memory
  PAW > <HP3>zone</HP3>                                          | Reset zone
</XMP>
<ARTWORK NAME=TUTEX14 ALIGN=CENTER DEPTH=16CM TOPMAR=8MM>
</FIG>
<FIG ID=TUTEX15 frame=box>
<FIGCAP>The use of sub-ranges in histogram specifiers
<XMP SCALE=0.9>
<I1>subrange
<I1>scatter plot (BOX option)
<I1>contour plot
<I1>surface plot
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX15                          *
  PAW > * Use of subranges in histogram specifiers                               *
  PAW > **************************************************************************
  PAW > <HP3>histogram/file 1 pawhists.rzdat</HP3>                       | Open histogram file created in PAWEX11
  PAW > <HP3>hrin  0</HP3>                                               | Read all histograms from file
  PAW > <HP3>close 1</HP3>                                               | Close input unit
  PAW > <HP3>opt GRID</HP3>                                              | Draw grid on picture
  PAW > <HP3>opt UTIT</HP3>                                              | Turn off HBOOK titles
  PAW > <HP3>zone 2 2</HP3>                                              | Divide picture in two by two parts
  PAW > <HP3>hi/pl 110(56:95) e</HP3>                                    | Plot subrange of histogram 110
  PAW > <HP3>opt NGRI</HP3>                                              | No grid on picture
  PAW > <HP3>set htyp -3</HP3>                                           | Set hatch styles for histogram
  PAW > <HP3>hi/pl 200(8:8,)     BOX</HP3>                               | Plot subrange of 200 with BOX option
  PAW > <HP3>hi/pl 200(3:15,3:15) CONT</HP3>                             | Plot subrange of 200 as a CONTOUR plot
  PAW > <HP3>hi/pl 200(4:12,4:12) LEGO</HP3>                             | Plot subrange of 200 as a LEGO plot
  PAW > <HP3>hi/del 0</HP3>                                              | Delete histograms in memory
  PAW > <HP3>zone</HP3>                                                  | Reset zone
</XMP>
<ARTWORK NAME=TUTEX15 ALIGN=CENTER DEPTH=16CM TOPMAR=10MM>
</FIG>
<?.PA>
<H2>Examples with Ntuples
<I1>Ntuple
<P>
Ntuples are large named two-dimensional arrays.
From the physicist's point of view they can be
considered as <HP2>event</HP2> files.
<I1>event
Ntuples can be accessed as a whole or single
columns, or even single components.
<HP2>Columns</HP2> can be identified by a name
or by an index.
A rather complete set of
<HP2>operators</HP2> is available to deal with
Ntuples - these include capabilities to apply
<HP2>cuts</HP2> or <HP2>selection criteria</HP2>
to the Ntuple data, using a notation where
arithmetic and boolean operators and mathematical functions
can be freely used.
<I1>mask
A powerful <HP2>mask</HP2> facility exists to enable the user to
select a Ntuple subset which has particular
characteristics, allowing in this way very fast access
to a data subset (see section <HDREF REFID=NTUPLH2> for more details).
<H3>A first example - CERN personnel statistics
<P>
In order to introduce and explain the main functionalities of the Ntuples,
a simple data sample containing some characteristics of the CERN staff, will
be used. For each member of the staff there exists one entry in the file. Each
entry consists of 11 values, described in <TREF REFID=CERNPER>.
<TABLE ID=CERNPER RULES='BOTH' COLS='2.5CM *' mindepth=p5 align='l l' FRAME=BOX HP='2 0' WIDTH=PAGE CONCAT=NO>
<TCAP>Definition of the variables of the CERN staff Ntuple
<THD>
<C>Variable Name
<C>Description and possible values
</THD>
<ROW>
<C>CATEGORY:
<C>Professional category (integer between 100 and 600)
<HP2>100-199</HP2>: Scientific staff
<HP2>200-299</HP2>: Engineering staff
<HP2>300-399</HP2>: Technical support staff
<HP2>400-499</HP2>: Crafts and trade support staff
<HP2>500-529</HP2>: Supervisory administrative staff
<HP2>530-559</HP2>: Intermediate level administrative staff
<HP2>560-599</HP2>: Lower level administrative staff
<ROW>
<C>DIVISION:
<C>Code for each division (integer between 1 and 13)
<XPH>1=AG 2=DD  3=DG   4=EF  5=EP  6=FI  7=LEP </XPH>
<XPH>8=PE 9=PS 10=SPS 11=ST 12=TH 13=TIS </XPH>
<ROW>
<C>FLAG:
<C>A flag where the first four bits have the following significance
Bit 1 = 0 means <HP2>female</HP2> otherwise <HP2>male</HP2>
Bit 2 = 0 means <HP2>resident</HP2> otherwise <HP2>non-resident</HP2>
Bit 3 = 0 means <HP2>single</HP2> otherwise <HP2>head of family</HP2>
Bit 4 = 0 means <HP2>fixed term contract</HP2> otherwise <HP2>indefinite duration contract</HP2>
<ROW>
<C>AGE:
<C><HP2>Age</HP2> (in years) of staff member
<ROW>
<C>SERVICE:
<C>Number of <HP2>years of service</HP2> that the staff member has at CERN
<ROW>
<C>CHILDREN:
<C>Number of <HP2>dependent children</HP2>
<ROW>
<C>GRADE:
<C>Staff member 's position in <HP2>Grade</HP2> scale (integer between 3 and 14)
<ROW>
<C>STEP:
<C>Staff member 's position (step) <HP2>inside</HP2> given grade
(integer between 0 and 15)
<ROW>
<C>NATION:
<C>Code for staff member's <HP2>nationality</HP2> (integer between 1 and 15)
<XPH> 1=AT  2=BE  3=CH  4=DE  5=DK  6=ES  7=FR 8=GB  9=GR 10=IT
11=NL 12=NO 13=PT 14=SE 15=ZZ (non-member states)</XPH>
<ROW>
<C>HRWEEK:
<C>Number of contractual <HP2>hours worked per week</HP2> (between 20 and 44)
<ROW>
<C>COST:
<C><HP2>Cost</HP2> of the staff member to CERN (in CHF)
</TABLE>
<?.PA>
<H3>Creating Ntuples
<P>Ntuples can be created interactively, using PAW (see <FIGREF REFID=TUTEX16>)
or in an independent batch job, using HBOOK, using the following
calling sequence <BIBREF REFID=HBOOK>
<XMP>
CALL HBOOKN(IDN,TITLE,NCOLUM,CHRZPA,NPRIME,CHTAGS)
</XMP>
<I1>HBOOKN
<I1>Ntuple creation
<I1>create Ntuple
Two kinds of Ntuples are supported: <HP2>memory-resident</HP2> Ntuples
for small data samples, which can be completely contained in memory,
or <HP2>disk-resident</HP2> Ntuples for
large data samples which need the use of
an extended store.
<I1>batch
<I1>HBOOK
For example the FORTRAN program equivalent to the code for the
creation of the memory-resident Ntuple in <FIGREF REFID=TUTEX16> is as follows:
<XMP>
      PROGRAM APTUPLE
      PARAMETER (NCOLUM=11)
      CHARACTER*8 CHTAGS(NCOLUM)
      COMMON/PAWC/H(70000)
      REAL XTUPLE(NCOLUM)
      DATA NPRIME/1000/
*
      DATA CHTAGS/'category','division','flag','age','service',
     + 'children','grade','step','nation','hrweek','cost'/
*
      CALL HLIMIT(70000)
      OPEN(UNIT=1,FILE='APTUPLE.DAT',STATUS='OLD')
      CALL HBOOKN(10,'CERN Population',NCOLUM,' ',NPRIME,CHTAGS)
      DO 100 I=1,10000
        READ(1,'(10F4.0,4F7.0)',END=1000) XTUPLE
        CALL HFN(10,XTUPLE)
  100 CONTINUE
*
 1000 CALL HRPUT(0,'aptuple.rzdat','N')
      END
</XMP>
<H4>Memory-resident Ntuple: CHRZPA='&nbsp;'
<P>The storage required for a memory-resident Ntuple is approximately
the product of the number of columns <XPH><HP2>NCOLUM</HP2></XPH>
multiplied by the number of events. With a call to <XPH><HP2>HBOOKN</HP2></XPH>
an initial bank of size <XPH><HP2>NPRIME</HP2></XPH> words is
created in memory. When the bank is full, a new bank with the same
size is created and is linked to the previous bank, and so on up to the
maximum memory allocation declared by the call to <XPH><HP2>HLIMIT</HP2></XPH>.
A memory-resident Ntuple can be saved on a HBOOK file with a call to
<XPH><HP2>HROUT</HP2></XPH> or <XPH><HP2>HRPUT</HP2></XPH>.
<H4>Disk-resident Ntuple: CHRZPA='RZ directory name to store the Ntuple'
<P>In this case a bank with a size of <XPH><HP2>NPRIME</HP2></XPH> words
is also created in memory. However, when the bank is full, its contents is
written to disk into the directory <XPH><HP2>CHRZPA</HP2></XPH>, and the
<HP2>same</HP2> bank is used to store the data for the next events, thus
overwriting the initial contents. As for a memory-resident Ntuple, a header
is kept in memory. It contains among other things the number of events
already treated as well as the number and the address of the disk extensions.
This header <HP2>must</HP2> be saved (after filling the Ntuple) on the disk
file after having set the current directory to <XPH><HP2>CHRZPA</HP2></XPH>.
The number of extensions on disk can be interactively displayed using the
command:
<XMP>
 PAW > <HP3>LDIR ' ' A</HP3>
</XMP>
<P>The example above could be modified in the following way
to create a disk-resident Ntuple:
<XMP>
                       . . . . . .
      OPEN(UNIT=1,FILE='aptuple.dat',STATUS='OLD')
      LRECL=1024
      CALL HROPEN(2,'APTUPLE','aptuple.rzdat','N',LRECL,ISTAT)
      CALL HBOOKN(10,'CERN Population',NCOLUM,'APTUPLE',NPRIME,CHTAGS)
                       . . . . . .
 1000 CALL HROUT(0,ICYCLE,' ')
      CALL HREND('APTUPLE')
      END
</XMP>
<P>When dealing with very large Ntuples, it is recommended to open the
HBOOK file with a large block size (e.g. <XPH><HP2>LRECL=8192</HP2></XPH> words
and a large primary allocation (e.g. <XPH><HP2>NPRIME=60000</HP2></XPH>).
Routine <XPH><HP2>HROPEN</HP2></XPH> allocates a maximum of
<XPH><HP2>8000</HP2></XPH> records each <XPH><HP2>LRECL</HP2></XPH>
words long. If more is required, put <XPH><HP2>CHOPT='NQ'</HP2></XPH>
and <XPH><HP2>IQUEST(10)=Number of records</HP2></XPH>, where
the vector <XPH><HP2>IQUEST</HP2></XPH> is defined in the
<XPH><HP2>ZEBRA</HP2></XPH> common <XPH><HP2>COMMON/QUEST/IQUEST(100)</HP2></XPH>.
<H4>Listing the directory of the memory-resident Ntuple
<XMP SCALE=0.7>
 PAW > <HP3>LDIR</HP3>
SIGMA
    ************** Directory ===> //aptuple <===
 
                  Created 890627/1620  Modified 890627/1621
 
 ===> List of objects
     HBOOK-ID  CYCLE   DATE/TIME   NDATA   OFFSET    REC1    REC2
         10       1   890627/1621  38107       1       3       4 ==>    40
 
  NUMBER OF RECORDS =   39  NUMBER OF MEGAWORDS =  0 + 39131 WORDS
  PER CENT OF DIRECTORY QUOTA USED =   0.975
  PER CENT OF FILE USED            =   0.975
  BLOCKING FACTOR                  =  95.420
</XMP>
It is seen that <XPH><HP2>38107</HP2></XPH> words were needed to store all
the data associated to the Ntuple.
The file <XPH>aptuple.rzdat</XPH> created in batch by the program or
the one created interactively in <FIGREF REFID=TUTEX16> are completely interchangeable.
<I1>HBOOK histogram file
<I1>histogram file
<I1>RZ file
Generally speaking, a Ntuple (or any HBOOK histogram RZ file)
can be created in batch on a mainframe and then transferred to
a machine running PAW. See <HDREF REFID=H1DIST> for more details.
<H4>Listing the directory of the disk-resident Ntuple
<P>In the listing below extensions are identified by
<XPH>10000*Extension_Number&nbsp;+&nbsp;Ntuple_ID</XPH>.
<XMP SCALE=0.7>
 PAW > <HP3>LDIR ' ' A </HP3>
 
 ************** Directory ===> //LUN2 <===
 
                  Created 891010/1038  Modified 891010/1038
 
 ===> List of objects
     HBOOK-ID  CYCLE   DATE/TIME   NDATA   OFFSET    REC1    REC2
      10010       1   891010/1038   1005       1       3
      20010       1   891010/1038   1005    1006       3       4
      30010       1   891010/1038   1005     987       4       5
      40010       1   891010/1038   1005     968       5       6
      50010       1   891010/1038   1005     949       6       7
      60010       1   891010/1038   1005     930       7       8
      70010       1   891010/1038   1005     911       8       9
      80010       1   891010/1038   1005     892       9      10
      90010       1   891010/1038   1005     873      10      11
     100010       1   891010/1038   1005     854      11      12
     110010       1   891010/1038   1005     835      12      13
     120010       1   891010/1038   1005     816      13      14
     130010       1   891010/1038   1005     797      14      15
     140010       1   891010/1038   1005     778      15      16
     150010       1   891010/1038   1005     759      16      17
     160010       1   891010/1038   1005     740      17      18
     170010       1   891010/1038   1005     721      18      19
     180010       1   891010/1038   1005     702      19      20
     190010       1   891010/1038   1005     683      20      21
     200010       1   891010/1038   1005     664      21      22
     210010       1   891010/1038   1005     645      22      23
     220010       1   891010/1038   1005     626      23      24
     230010       1   891010/1038   1005     607      24      25
     240010       1   891010/1038   1005     588      25      26
     250010       1   891010/1038   1005     569      26      27
     260010       1   891010/1038   1005     550      27      28
     270010       1   891010/1038   1005     531      28      29
     280010       1   891010/1038   1005     512      29      30
     290010       1   891010/1038   1005     493      30      31
     300010       1   891010/1038   1005     474      31      32
     310010       1   891010/1038   1005     455      32      33
     320010       1   891010/1038   1005     436      33      34
     330010       1   891010/1038   1005     417      34      35
     340010       1   891010/1038   1005     398      35      36
     350010       1   891010/1038   1005     379      36      37
     360010       1   891010/1038   1005     360      37      38
     370010       1   891010/1038   1005     341      38      39
         10       1   891010/1038   1107     322      39      40
 
  NUMBER OF RECORDS =   39  NUMBER OF MEGAWORDS =  0 + 39316 WORDS
  PER CENT OF DIRECTORY QUOTA USED =   0.975
  PER CENT OF FILE USED            =   0.975
  BLOCKING FACTOR                  =  95.883
</XMP>
<I1>overflow on RZ file
<FIG ID=TUTEX16 frame=box>
<FIGCAP>Ntuples - Creation and output to a file
<XMP SCALE=0.7>
<I1>Ntuple
<I2>Create Ntuple
<I2>Read text file
<I2>Write Ntuple RZ file
<I2>Print Ntuple
<I2>Plot Ntuple
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX16                          *
  PAW > * Creation of a Ntuple and first look at its contents                    *
  PAW > **************************************************************************
  PAW > <HP3>Ntuple/create 10 'CERN Population' 11 ' ' 3500</HP3> _      | Create Ntuple <HP3>10</HP3> with <HP3>11</HP3> variables
  PAW >_ <HP3>Category Division Flag Age Service Children Grade Step Nation Hrweek Cost</HP3>
  PAW > <HP3>Ntuple/read 10 aptuple.dat</HP3>                            | Read the elements of the ntuple
  PAW > <HP3>Histo/file 1 aptuple.rzdat 1024 N</HP3>                     | Open Histogram file on unit 1
  PAW > <HP3>hrout 10</HP3>                                              | Write the ntuple to the file
  PAW > <HP3>ntuple/print 10</HP3>                                       | Look what Ntuple 10 contains
            ********************************************************
            * NTUPLE ID=   10  ENTRIES=   3354   CERN Population   *
            ********************************************************
            *  Var numb  *   Name    *    Lower     *    Upper     *
            ********************************************************
            *      1     * CATEGORY  * 0.102000E+03 * 0.567000E+03 *
            *      2     * DIVISION  * 0.100000E+01 * 0.130000E+02 *
            *      3     * FLAG      * 0.000000E+00 * 0.310000E+02 *
            *      4     * AGE       * 0.210000E+02 * 0.640000E+02 *
            *      5     * SERVICE   * 0.000000E+00 * 0.350000E+02 *
            *      6     * CHILDREN  * 0.000000E+00 * 0.600000E+01 *
            *      7     * GRADE     * 0.300000E+01 * 0.140000E+02 *
            *      8     * STEP      * 0.000000E+00 * 0.150000E+02 *
            *      9     * NATION    * 0.100000E+01 * 0.150000E+02 *
            *     10     * HRWEEK    * 0.200000E+01 * 0.440000E+02 *
            *     11     * COST      * 0.391000E+03 * 0.188530E+05 *
            ********************************************************
  PAW > <HP3>zone 1 2</HP3>                                              | Divide the plot into two
  PAW > <HP3>opt stat</HP3>                                              | Print statistics on plot
  PAW > <HP3>set stat 110</HP3>                                          | Number entries and average
  PAW > <HP3>opt grid</HP3>                                              | Add grid to pictures
  PAW > <HP3>set htyp -3</HP3>                                           | Define hatch style for histograms
  PAW > <HP3>Ntuple/plot 10.Age</HP3>                                    | Plot Age distribution
  PAW > <HP3>Ntuple/plot 10.Cost</HP3>                                   | Cost distribution
  PAW > <HP3>Close 1</HP3>                                               | Close file 1
  PAW > <HP3>hi/delete 10</HP3>                                          | Delete Ntuple 10 from memory
  PAW > <HP3>zone</HP3>                                                  | Reset zone
</XMP>
<ARTWORK NAME=TUTEX16 ALIGN=CENTER DEPTH=14CM TOPMAR=4MM>
</FIG>
<FIG ID=TUTEX17 frame=box>
<FIGCAP>Ntuples - Automatic and user binning
<XMP SCALE=0.8>
<I2>Read Ntuple
<I1>binning for Ntuple plots
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX17                          *
  PAW > * Read a Ntuple from a histogram file                                    *
  PAW > * Difference between automatic and user binning                          *
  PAW > **************************************************************************
  PAW > <HP3>hi/file 2 'aptuple.rzdat'</HP3>                               | Open histogram file
  PAW > <HP3>zone 2 2</HP3>                                                | Divide plot into two by two squares
  PAW > <HP3>opt nsta</HP3>                                                | No statistics on plot
  PAW > <HP3>opt grid</HP3>                                                | Add grid to pictures
  PAW > <HP3>set XTIC 0.15</HP3>                                           | X-axis tick mark length (in cm)
  PAW > <HP3>set YTIC 0.15</HP3>                                           | Y-axis tick mark length (in cm)
  PAW > <HP3>set HTYP -3</HP3>                                             | Define hatch style for histograms
  PAW > <HP3>Ntuple/pl 10.age</HP3>                                        | Age distribution with <HP3>automatic</HP3> binning
  PAW > <HP3>hi/create/1dhisto 11 'Age - User binning' 45 20. 65.</HP3>    | Book histogram 11
  PAW > <HP3>set ndvx -509</HP3>                                           | Exactly 5 secondary and 9 primary divisions
  PAW > <HP3>Ntuple/project 11 10.Age</HP3>                                | Age distribution with <HP3>user</HP3> binning
  PAW > <HP3>hi/plot 11</HP3>                                              | Plot histogram 11
  PAW > <HP3>hi/create/1dhisto 12 'Cost - User binning' 50 0. 20000.</HP3> | Book histogram 12
  PAW > <HP3>set ndvx</HP3>                                                | Default divisions
  PAW > <HP3>Ntuple/plot 10.cost</HP3>                                     | Cost distribution with <HP3>automatic</HP3> binning
  PAW > <HP3>set ndvx -504</HP3>                                           | Exactly 5 secondary and 4 primary divisions
  PAW > <HP3>Ntuple/pl 10.Cost ! -12</HP3>                                 | Cost distribution with <HP3>user</HP3> binning
  PAW > <HP3>close 2</HP3>                                                 | Close histogram file
  PAW > <HP3>zone</HP3>                                                    | Reset zone
  PAW > <HP3>hi/de 0</HP3>                                                 | Delete histograms from memory
</XMP>
<ARTWORK NAME=TUTEX17 ALIGN=CENTER DEPTH=155MM TOPMAR=6MM>
</FIG>
<FIG ID=TUTEX18 frame=box>
<FIGCAP>Ntuples - A first look at selection criteria
<XMP SCALE=0.7>
<I1>selection
<I1>cut
<I1>alias
<I1>Ntuple
<I1>scan
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX18                          *
  PAW > * Ntuple SCAN and the use of simple selection criteria                   *
  PAW > **************************************************************************
  PAW > <HP3>hi/file 2 'aptuple.rzdat'</HP3>                               | Open histogram file
  PAW > <HP3>opt grid</HP3>                                                | Add grid to pictures
  PAW > <HP3>opt stat</HP3>                                                | Print statistics on plot
  PAW > <HP3>set stat 110</HP3>                                            | Indicate number of entries and average
  PAW > <HP3>ALIAS/CREATE DIVEP 5</HP3>                                    | Create alias for EP Division
  PAW > <HP3>ALIAS/CREATE NATFR 7</HP3>                                    | Create alias for French nationality
  PAW > <HP3>NT/SCAN 10 nation=NATFR.and.division=DIVEP</HP3> _            | Scan and look for French CERN staff in EP division
  PAW >_ <HP3>! ! 5 age service children grade step</HP3>                  |   printing the variables indicated
           *******************************************************************************
           * ENTRY *   AGE       *   SERVICE   *   CHILDREN  *   GRADE     *   STEP      *
           *******************************************************************************
           !    48 !   56.000    !   34.000    !  0.00000    !   7.0000    !   8.0000    !
           !   194 !   62.000    !   27.000    !  0.00000    !   7.0000    !   13.000    !
           !   213 !   56.000    !   26.000    !  0.00000    !   6.0000    !   13.000    !
           !   214 !   45.000    !   26.000    !  0.00000    !   6.0000    !   12.000    !
           !   216 !   56.000    !   19.000    !  0.00000    !   5.0000    !   13.000    !
           !   266 !   63.000    !   26.000    !  0.00000    !   13.000    !   10.000    !
           !   267 !   59.000    !   32.000    !  0.00000    !   13.000    !   10.000    !
           !   273 !   55.000    !   26.000    !   1.0000    !   12.000    !   13.000    !
           !   275 !   53.000    !   26.000    !   1.0000    !   11.000    !   13.000    !
           !   279 !   51.000    !   30.000    !  0.00000    !   6.0000    !   13.000    !
           !   315 !   56.000    !   25.000    !  0.00000    !   8.0000    !   6.0000    !
           !   318 !   64.000    !   26.000    !  0.00000    !   6.0000    !   13.000    !
           !   320 !   49.000    !   26.000    !  0.00000    !   6.0000    !   13.000    !
           !   327 !   59.000    !   19.000    !  0.00000    !   5.0000    !   13.000    !
           !   328 !   51.000    !   25.000    !  0.00000    !   5.0000    !   13.000    !
           More...? ( &lt;CR>/N ): n
           ==>     15 events have been scanned
  PAW > <HP3>hi/create/1d 200 'Number of years at CERN' 35 0. 35.</HP3>    | Create histogram 200
  PAW > <HP3>max 200 250</HP3>                                             | Specify maximum for histogram 200
  PAW > <HP3>set ndvx 507</HP3>                                            | Maximum 5 secondary and 7 primary divisions
  PAW > <HP3>set htyp -3</HP3>                                             | Define hatch style
  PAW > <HP3>Nt/pl 10.Service ! -200</HP3>                                 | Plot years of service
  PAW > <HP3>ATITLE 'Years at CERN' 'Number of staff'</HP3>                | Define axis titles
  PAW > <HP3>set htyp 344</HP3>                                            | Change hatch style
  PAW > <HP3>Nt/pl 10.Service nation=NATFR -200 ! ! S</HP3>                | Number of years at CERN for French staff members
  PAW > <HP3>set htyp 144</HP3>                                            | Change hatch style
  PAW > <HP3>Nt/pl 10.Service</HP3> _
  PAW >_ <HP3>division=DIVEP.and.nation=NATFR -200 ! ! S</HP3>             | Number of years at CERN for French Staff in EP
  PAW > <HP3>close 2</HP3>                                                 | Close histogram file
  PAW > <HP3>set htyp 0</HP3>                                              | Reset hatch style
  PAW > <HP3>hi/de 0</HP3>                                                 | Delete histograms from memory
  PAW > <HP3>zone</HP3>                                                    | Reset zone
</XMP>
<ARTWORK NAME=TUTEX18 ALIGN=CENTER DEPTH=10.5CM TOPMAR=8MM>
</FIG>
<FIG ID=TUTEX19 frame=box>
<FIGCAP>Ntuples - Masks and loop
<XMP SCALE=0.7>
<I1>mask
<I2>mask
<I2>loop
<I1>loop
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX19                          *
  PAW > *  Use of Ntuple masks and loop construct                                *
  PAW > **************************************************************************
  PAW > <HP3>hi/file 2 'aptuple.rzdat'</HP3>                               | Open histogram file
  PAW > <HP3>hrin 0</HP3>                                                  | Read Ntuple into memory
  PAW > <HP3>close 2</HP3>                                                 | Close histogram file
  PAW > <HP3>set xtic 0.0001</HP3>                                         | Make tick marks invisible
  PAW > <HP3>1dhisto 20 'Distribution by grade' 12 3 15</HP3>              | Create histogram 20
  PAW > <HP3>opt stat</HP3>                                                | Print statistics on plot
  PAW > <HP3>set stat 110</HP3>                                            | Indicate number of entries and average
  PAW > <HP3>opt grid</HP3>                                                | Draw grid on picture
  PAW > <HP3>set grid 1003</HP3>                                           | Only horizontal grid lines with line type 3
  PAW > <HP3>opt bar</HP3>                                                 | Activate option bar
  PAW > <HP3>igset barw 0.8</HP3>                                          | Width of bars
  PAW > <HP3>igset baro 0.1</HP3>                                          | Origin of bar
  PAW > <HP3>max 20 700</HP3>                                              | Maximum for histogram 20
  PAW > <HP3>set NDVX -12.05</HP3>                                         | Exactly 12 divisions with text centered in X
  PAW > <HP3>set NDVY 507</HP3>                                            | We want 5 secondary and 7 primary divisions in Y
  PAW > <HP3>set htyp -3</HP3>                                             | Dotted hatch style (postscript)
  PAW > <HP3>Ntuple/plot 10.grade ! -20</HP3>                              | Plot grade distribution into histogram 10
  PAW > <HP3>box 9.5 10.5 610 640</HP3>                                    | Draw a box on the histogram
  PAW > <HP3>igset TXAL 13</HP3>                                           | Left adjust X and center Y
  PAW > <HP3>igset TXFP -130</HP3>                                         | Roman font
  PAW > <HP3>igset CHHE 0.35</HP3>                                         | Character height
  PAW > <HP3>itx 10.7 625 'All Staff'</HP3>                                | Add some text to the histogram
  PAW > <HP3>set htyp 244</HP3>                                            | Change the hatch style
  PAW > *  Define via a mask those people which are at the end of their grade
  PAW > <HP3>ntuple/mask stmask N 3500</HP3>                               | Define mask on file stmask.mask
  PAW > <HP3>ntuple/loop 10.grade step=15>>stmask(1)</HP3>
  PAW > <HP3>ntuple/loop 10.grade grade>4.and.step=13>>stmask(2)</HP3>
  PAW > <HP3>ntuple/loop 10.grade (grade=13.and.step=10).or.(grade=14.and.step=7)>>stmask(3)</HP3>
  PAW > <HP3>Ntuple/plot 10.grade stmask(1).or.stmask(2).or.stmask(3)>>stmask(4) -20 ! ! S</HP3>
  PAW > <HP3>ntuple/mask stmask C</HP3>                                    | Close mask file
  PAW > <HP3>box 9.5 10.5 560 590</HP3>                                    | Draw second box on the histogram
  PAW > <HP3>itx 10.7 575 'Staff at end of grade'</HP3>                    | Add some more text to the histogram
  PAW > <HP3>ATITLE 'Grade' 'Number of Staff'</HP3>                        | Axis title
  PAW > <HP3>set htyp 0</HP3>                                              | Reset hatch style
  PAW > <HP3>hi/de 0</HP3>                                                 | Delete histograms from memory
 
</XMP>
<ARTWORK NAME=TUTEX19 ALIGN=CENTER DEPTH=13CM>
</FIG>
<FIG ID=TUTEX20 frame=box>
<FIGCAP>Ntuples - Using cuts
<XMP SCALE=0.8>
<I1>cut
<I1>cut
<I1>bar chart
<I1>alphanumeric labels
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX20                          *
  PAW > * The use of Ntuple Cuts                                                 *
  PAW > **************************************************************************
  PAW > <HP3>hi/file 2 'aptuple.rzdat'</HP3>                               | Open histogram file
  PAW > <HP3>Ntuple/cut 1 MOD(FLAG,2).EQ.0</HP3>                           | CUT 1 : Female staff
  PAW > <HP3>Ntuple/cut 2 MOD(FLAG,4)>1</HP3>                              | CUT 2 : Non-resident staff
  PAW > <HP3>1d 20 'Male/female and resident/non-resident Staff' 13 1 14</HP3>
  PAW > <HP3>opt grid</HP3>                                                | Draw grid on picture
  PAW > <HP3>set grid 1003</HP3>                                           | Only horizontal grid lines with line type 3
  PAW > <HP3>opt bar</HP3>                                                 | Activate the bar chart option
  PAW > <HP3>opt stat</HP3>                                                | Print statistics on plot
  PAW > <HP3>set stat 10</HP3>                                             | Show only number of entries on plot
  PAW > <HP3>set xtic 0.0001</HP3>                                         | Eliminate tick marks
  PAW > <HP3>igset barw 0.4</HP3>                                          | Set bar origin
  PAW > <HP3>igset baro 0.1</HP3>                                          | Set bar width
  PAW > <HP3>max 20 600</HP3>                                              | Maximum for histogram 20
  PAW > <HP3>labels 1 13 AG DD DG EF EP FI LEP PE PS SPS ST TH TIS</HP3>   | Define labels for X axis
  PAW > <HP3>set NDVX 13.15</HP3>                                          | X axis should centre the labels
  PAW > <HP3>Ntuple/plot 10.division ! -20</HP3>                           | Plot all staff per division into histogram 20
  PAW > <HP3>set htyp -3</HP3>                                             | Choose hatch style
  PAW > <HP3>Ntuple/plot 10.division 2 -20 ! ! s</HP3>                     | Plot staff per division (satisfying cut 2)
  PAW > <HP3>igset baro 0.5</HP3>                                          | Reset bar origin
  PAW > <HP3>set htyp 145</HP3>                                            | Change hatch style
  PAW > <HP3>Ntuple/plot 10.division 1 -20 ! ! s</HP3>                     | Plot staff per division (satisfying cut 1)
  PAW > <HP3>set htyp 154</HP3>                                            | Change hatch style
  PAW > <HP3>Ntuple/plot 10.division 1.and.2 -20 ! ! s</HP3>               | Plot staff per division (satisfying cuts 1 and 2)
  PAW > <HP3>atitle ' ' 'Number of staff'</HP3>                            | Axis title
  PAW > <HP3>close 2</HP3>                                                 | Close histogram file
  PAW > <HP3>set htyp 0</HP3>                                              | Reset hatch style
  PAW > <HP3>hi/de 0</HP3>                                                 | Delete histograms from memory
 
</XMP>
<ARTWORK NAME=TUTEX20 ALIGN=CENTER DEPTH=14CM>
</FIG>
<FIG ID=TUTEX21 frame=box>
<FIGCAP>Ntuples - Two dimensional data representation
<XMP SCALE=1>
<I1>two-dimensional data presentation
<I1>SET NDVX
<I1>SET NDVY
<I1>LEGO plot
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX21                          *
  PAW > * Two dimensional Ntuple distributions                                   *
  PAW > **************************************************************************
  PAW > <HP3>hi/file 2 'aptuple.rzdat'</HP3>                        | Open histogram file
  PAW > <HP3>clr</HP3>                                              | Clear screen
  PAW > <HP3>2d 20 ' ' 12 3 15 16 0 16 0.</HP3>                     | Book 2-dim histogram 20
  PAW > <HP3>Nt/project 20 10.step%grade</HP3>                      | Project Ntuple onto histogram 20
  PAW > * Lego plot of staff near end of grade (step &ge;7) and choose viewing angles
  PAW > * Note that the 2-dim Ntuple projection and histogram sub-range specifications are reversed
  PAW > <HP3>lego 20(1:,7:) 20 40</HP3>                             | Plot resulting hist 20 as LEGO plot
  PAW > <HP3>close 2</HP3>                                          | Close histogram file
  PAW > <HP3>hi/de 0</HP3>                                          | Delete histograms from memory
</XMP>
<ARTWORK NAME=TUTEX21 ALIGN=CENTER DEPTH=16CM TOPMAR=2CM>
</FIG>
<?.PA>
<H2>The SIGMA application and more complex examples
<FIG ID=TUTEX22 frame=box PLACE=INLINE>
<FIGCAP>Using the SIGMA processor - Trigonometric functions
<I1>SIGMA
<XMP SCALE=0.75>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX22                          *
  PAW > * Examples of the SIGMA processor - 1                                    *
  PAW > **************************************************************************
  PAW > <HP3>zone 2 2</HP3>                             | Divide picture two by two
  PAW > <HP3>opt GRID</HP3>                             | Draw grid on picture
  PAW > <HP3>sigma x=array(200,0#2*PI)</HP3>            | Define array x with 200 elements values between 0 and 2 pi
  PAW > <HP3>sigma sinus=sin(x)</HP3>                   | sinus is array defined implicitly
  PAW > <HP3>sigma sinx=sin(x)/x</HP3>                  | sinx       ditto
  PAW > <HP3>gra 200 x sinus</HP3>                      | Make graph of array sinus
  PAW > <HP3>set dmod 2</HP3>                           | New line style
  PAW > <HP3>gra 200 x sinx l</HP3>                     | Make graph of array sinx
  PAW > <HP3>set dmod 0</HP3>                           | Default line style
  PAW > <HP3>SIGMA x=array(300,0#8)</HP3>               | Define array x with 300 elements filled with values between 0 to 8
  PAW > <HP3>SIGMA g=cosh(x)+sin(1/(.1+X*X))</HP3>      | Hyperbolic cosine oscillations are invisible
  PAW > <HP3>gra 300 X G</HP3>                          | Plot the vectors x and g
  PAW > <HP3>SIGMA  x=array(300,0#3)</HP3>              | Define array x with 300 elements filled with values between 0 to 3
  PAW > <HP3>SIGMA g=cosh(x)+sin(1/(.1+X*X))</HP3>      | Calculate the ordinate
  PAW > <HP3>gra 300 X G</HP3>                          | Plot the vectors x and g
  PAW > <HP3>SIGMA  x=array(300,0#1)</HP3>              | Define array x with 300 elements filled with values between 0 to 1
  PAW > <HP3>SIGMA g=cosh(x)+sin(1/(.1+X*X))</HP3>      | Calculate the ordinate
  PAW > <HP3>gra 300 X G</HP3>                          | Plot vectors x against g
</XMP>
<ARTWORK NAME=TUTEX22 ALIGN=CENTER WIDTH=15.5CM TOPMAR=8MM>
</FIG>
<FIG ID=TUTEX23 frame=box>
<FIGCAP>Using the SIGMA processor - More complex examples
<I1>SIGMA
<XMP SCALE=0.70>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX23                          *
  PAW > * Examples of the SIGMA processor - 2                                    *
  PAW > **************************************************************************
  PAW > <HP3>zone 2 2</HP3>                             | Divide picture two by two
  PAW > <HP3>sigma x=array(200,0#5)</HP3>               | Define array x with 200 elements filled with values between 0 to 5
  PAW > <HP3>sigma A=8</HP3>                            | Assign scalar A
  PAW > <HP3>sigma B=.01</HP3>                          | Assign scalar B
  PAW > <HP3>sigma Y=EXP(-X)*SIN(A*X)+B*X*X</HP3>       | Y is an array function of A and B
  PAW > <HP3>opt GRID</HP3>                             | Grid on picture
  PAW > <HP3>gra 200 x y</HP3>                          | 2-dim representation y versus x
  PAW > <HP3>opt NGRI</HP3>                             | No grid on picture
  PAW > <HP3>SIGMA x=array(200,0#2*pi)</HP3>            | Array between 0 and 2 pi
  PAW > <HP3>SIGMA s=sin(x)</HP3>                       | Define some more arrays (automatic creation of array s)
  PAW > <HP3>SIGMA S2=S/2</HP3>                         |                         (automatic creation of array s2)
  PAW > <HP3>SIGMA c=cos(x)</HP3>                       |                         (automatic creation of array c)
  PAW > <HP3>SIGMA c2=c/2</HP3>                         |                         (automatic creation of array c2)
  PAW > <HP3>SIGMA s4=s/4</HP3>                         |                         (automatic creation of array s4)
  PAW > <HP3>SIGMA c4=c/4</HP3>                         |                         (automatic creation of array c4)
  PAW > <HP3>gra 200 s c</HP3>                          | Then plot all arrays in same plot
  PAW > <HP3>gra 200 s2 c l</HP3>                       |           ditto
  PAW > <HP3>gra 200 s4 c l</HP3>                       |           ditto
  PAW > <HP3>gra 200 s c2 l</HP3>                       |           ditto
  PAW > <HP3>gra 200 s2 c2 l</HP3>                      |           ditto
  PAW > <HP3>gra 200 s4 c2 l</HP3>                      |           ditto
  PAW > <HP3>gra 200 s c4 l</HP3>                       |           ditto
  PAW > <HP3>gra 200 s2 c4 l</HP3>                      |           ditto
  PAW > <HP3>gra 200 s4 c4 l</HP3>                      |           ditto
  PAW > <HP3>sigma a=array(100,0#59.77)</HP3>           | A array of 100 elements with values between 0 and 59.77 (19*pi)
  PAW > <HP3>SIGMA NC=NCO(A)</HP3>                      | interrogate SIGMA to know array length
  PAW > <HP3>SIGMA y=cos(a)*a</HP3>                     | y becomes an array of length 100
  PAW > <HP3>SIGMA x=sin(a)*a</HP3>                     | x becomes an array of length 100
  PAW > <HP3>GRA NC X Y</HP3>                           | Plot x versus y
  PAW > <HP3>SIGMA a=a*2.55555</HP3>                    | Increase the amplitude
  PAW > <HP3>SIGMA y=cos(a)*a</HP3>                     | y becomes an array of length 100
  PAW > <HP3>SIGMA x=sin(a)*a</HP3>                     | x becomes an array of length 100
  PAW > <HP3>GRA NC X Y</HP3>                           | Plot x versus y
&nbsp;
</XMP>
<ARTWORK NAME=TUTEX23 ALIGN=CENTER WIDTH=13.5CM>
</FIG>
<FIG ID=TUTEX24 frame=box>
<FIGCAP>Histogram operations (Keep and Update)
<XMP SCALE=0.75>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX24                          *
  PAW > * Operations on histograms (Keep and Update)                             *
  PAW > **************************************************************************
  PAW > <HP3>histogram/file 1 pawhists.rzdat</HP3>                       | Open histogram file
  PAW > <HP3>Zone 1 2</HP3>                                              | Divide plot in 2 vertically
  PAW > <HP3>opt grid</HP3>                                              | Draw grid on picture
  PAW > <HP3>set grid 1003</HP3>                                         | Horizontal grid only with line type 3
  PAW > <HP3>set hcol 1005</HP3>                                         | Histogram colour
  PAW > <HP3>h/pl 120 k</HP3>                                            | Plot hist 120 and keep in memory
  PAW > <HP3>set grid</HP3>                                              | Default grid (horizontal + vertical)
  PAW > <HP3>set htyp -3</HP3>                                           | Hatch style histogram colour
  PAW > <HP3>h/pl 110</HP3>                                              | Plot histogram 120
  PAW > <HP3>set hcol 1002</HP3>                                         | Histogram colour
  PAW > <HP3>h/pl 110 +</HP3>                                            | Add 110 on the last kept Histogram
  PAW > <HP3>set htyp 144</HP3>                                          | Histogram hatch style
  PAW > <HP3>h/pl 130 +</HP3>                                            | Add 130 on the last kept Histogram
  PAW > <HP3>zone</HP3>                                                  | Reset zone
  PAW > <HP3>close 1</HP3>                                               | Close input unit
&nbsp;
</XMP>
<ARTWORK NAME=TUTEX24 ALIGN=CENTER DEPTH=16CM TOPMAR=18MM>
</FIG>
<FIG ID=TUTEX25 frame=box>
<FIGCAP>Merging several pictures into one plot
<I1>merge pictures
<XMP SCALE=0.65>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX25                          *
  PAW > * Merge pictures onto one plot                                           *
  PAW > **************************************************************************
  PAW > <HP3>edit PICTMERGE</HP3>                                        | Look at the macro for merging plots
       Macro PICTMERGE HID=0 S1=1 S2=100
       **************************************************************************
       * Macro Merge : Companion macro to PAW TUTORIAL EXAMPLE PAWEX25          *
       **************************************************************************
       next                                                  | Initialise next picture
       set *                                                 | Reset Graphics settings
       opt *                                                 | Reset options
       opt NBOX                                              | No box around picture
       set hwid 4                                            | Width of histogram lines
       set bwid 4                                            | Width of box lines
       set pwid 4                                            | Width of picture lines
       igset lwid 4                                          | Width of  lines
       set vfon -1042                                        | Font for axes (GKSGRAL font -104, precision 2)
       set lfon -1042                                        | Font for axis labels
       swi Z                                                 | Z mode only
       pic/cr MERGE2                                         | Create a picture with name MERGE2
       set HTYP -3                                           | Set hatch type -3
       hi/pl &lsqb;hid&rsqb;                                           | Plot histo HISTID into picture MERGE2
       set htyp 244                                          | Set histo hatch style
       hi/pl &lsqb;hid&rsqb;(&lsqb;s1&rsqb;:&lsqb;s2&rsqb;) s                              | Hatch sub-range of histo HISTID
       pic/cr MERGE1                                         | Create next picture
       set HTYP -3                                           | Reset hatch style
       opt utit                                              | No histogram title
       opt grid                                              | Draw grid on inset
       hi/pl &lsqb;hid&rsqb;(&lsqb;s1&rsqb;:&lsqb;s2&rsqb;)                                | Plot the subrange into picture MERGE1
       opt ngri                                              | Eliminate option grid
       izpict MERGE2 c                                       | Make MERGE2 current picture
       pi/merge MERGE1 .45 .45 .47 D                         | Merge picture MERGE1 with current picture
       swi G                                                 | G mode only
       return
  PAW > <HP3>histogram/file 1 pawhists.rzdat</HP3>                       | Open histogram file
  PAW > <HP3>EXEC PICTMERGE hid=110 s1=31 s2=40</HP3>                    | Plot histo 110 with subrange as inset
  PAW > <HP3>close 1</HP3>                                               | Close input unit
</XMP>
<ARTWORK NAME=TUTEX25 ALIGN=CENTER DEPTH=15CM>
</FIG>
<FIG ID=TUTEX26 frame=box>
<FIGCAP>Pie charts with hatch styles and PostScript colour simulation
<I1>pie chart
<XMP SCALE=0.65>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX26                          *
  PAW > * Various forms of a PIE chart                                           *
  PAW > **************************************************************************
  PAW > <HP3>edit PIE</HP3>                                         | Look at the macro for pie chart
       MACRO PIE
       **************************************************************************
       *     Macro PIE : Companion macro to PAW TUTORIAL EXAMPLE PAWEX26        *
       **************************************************************************
       alias/cre colbackg  0                                 | background colour
       alias/cre colcompl  1                                 | complement of background
       alias/cre colred    2                                 | red
       alias/cre colgreen  3                                 | green
       alias/cre colblue   4                                 | blue
       alias/cre colyellow 5                                 | yellow
       alias/cre colpurple 6                                 | purple
       alias/cre colcyan   7                                 | cyan
 
       v/cre values(5) R 28.3 18.6 16.9 13.5 22.7            | create vector with values
       v/cre offset(5)  R 2*0. 2*20. 0.                      | C
       v/cre colour(5)  R colred colgreen colblue colyellow colpurple
       v/cre style(5)   R 111 222 333 444 265
       label 1 5 'Sun' 'DEC' 'HP' 'Apollo' 'Other'
 
       igset bord 1                                          | Draw border on pie chart
       zone 2 2                                              | Divide picture in 2 by 2
       null 0 20 0 20 A                                      | Initialize first picture part
       igset fais 1
       pie 10. 10. 7.  5 vws p offset ! colour
       null 0 20 0 20 A
       igset fais 1
       pie 10. 10. 7.  5 vws l offset ! colour
       null 0 20 0 20 A
       pie 10. 10. 7.  5 vws n offset style
       null 0 20 0 20 A
       pie 10. 10. 7.  5 vws l offset style
       al/de *
       RETURN
  PAW > <HP3>EXEC PIE</HP3>                                         | Execute macro for pie and bar chart
</XMP>
<ARTWORK NAME=TUTEX26 ALIGN=CENTER DEPTH=14CM>
</FIG>
<FIG ID=TUTEX27 frame=box>
<FIGCAP>A complex graph with PAW
<FIGSEG>
<XMP SCALE=0.65>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX27                          *
  PAW > * Make a complex graph with PAW using PostScript fonts                   *
  PAW > **************************************************************************
  PAW > <HP3>edit COMPTIME</HP3>                                         | Look at the macro for computer time
       MACRO COMPTIME
       **************************************************************************
       *             Companion macro to PAW TUTORIAL EXAMPLE 27                 *
       **************************************************************************
       OPT *                                                           | Reset options
       SET *                                                           | Reset HPLOT settings
       igset *                                                         | Reset HIGZ settings
       ve/de *                                                         | Delete all vectors
       OPT NBOX                                                        | No box on plot
       OPT LOGY                                                        | Logaritmic plot in y
       OPT TIC                                                         | Tic marks
       OPT UTIT                                                        | User title
       opt ZFL1                                                        | Keep picture in memory
       size 16 20                                                      | Size of picture
       set hwid 4                                                      | Width of histogram lines
       set fwid 4                                                      | Width of fit lines
       set bwid 4                                                      | Width of box lines
       set pwid 4                                                      | Width of picture lines
       igset lwid 4                                                    | Width of  lines
       set VSIZ 0.20                                                   | Size of axis values smaller
       set YGTI 1.2                                                    | Y position of global title
       set XVAL 0.4                                                    | Distance y axis to axis values
       set YVAL 0.2                                                    | Distance x axis to axis values
       set XLAB 1.0                                                    | Distance y axis to label
       set YLAB 0.8                                                    | Distance x axis to label
       set XTIC 0.15                                                   | Length x axis tick marks
       set YTIC 0.15                                                   | Length y axis tick marks
       set ASIZ 0.26                                                   | Size of axis text
       set GSIZ 0.35                                                   | Global title size
       set gfon -60                                                    | Global title font
       set vfon -60                                                    | Font of axis values
       set lfon -10                                                    | Font of axis labels
       igset lwid 4                                                    | Qaudruple line width
       title_gl 'CERN Central Computer Usage'                          | Global title of picture
       vector/create vy(30) R 9.2 11.8 34.9 60.7 87.1 217.8 360 1250 2500 4006 _  | IBM168 hours used for each year since 1960
         4478 5590 5910 6246 10879 12849 18429 19481 21171 25005 _
         31219 33928 37057 45520 57000 75957 98806 118993 131800 151138
       sigma vx=array(30,60#89)                                        | Define vector of x values 60 to 89
       ve/cre f1(2) r 2*0.0                                            | Create vector V1 for fit 1 result
       ve/cre f2(2) r 2*0.0                                            | Create vector v2 for fit 2 result
       SET NDVX -30.05                                                 | Exactly 30 divisions in X with labels centered on divisions
       NULL 60 90 5 250000                                             | Draw empty plot with given limits
       igset MSCF 0.75                                                 | Specify marker scale factor
       igset mtyp 21                                                   | Data points with polymarker
       graph 30 vx vy p                                                | Plot data points
       ve/fi vx(:10) vy(:10) ! e ws ! f1                               | Fit first part of data points
       ve/fi vx(10:) vy(10:) ! e ws ! f2                               | Fit second part of data points
       arrow  64. 62.    10.    10.  0.15                              | Draw arrow
       igset txal 20                                                   | Center text horizontally
       igset chhe 0.18                                                 | Character height
       itx 63.    12. 'IBM 709'                                        | Write text
       arrow  65. 63.    35.    35. -0.11                              | Draw arrow
       itx 64.    40  'IBM 7090'                                       | Write text
       arrow 75. 65.    150.   150. -0.11                              | Draw arrow
       itx 70.   200. 'CDC 6600'                                       | Write text
       arrow 85. 72.   4000.  4000. -0.11                              | Draw arrow
       itx 78.5  4500. 'CDC 7600'                                      | Write text
       arrow 82. 78.   6500.  6500. -0.11                              | Draw arrow
       itx 80.   7500. 'IBM 168 '                                      | Write text
       arrow 81. 79.  10000. 10000. -0.11                              | Draw arrow
       itx 80.  12000. 'IBM 3032'                                      | Write text
       arrow 85. 81.  18000. 18000. -0.11                              | Draw arrow
       itx 83.  20000. 'IBM 3081'                                      | Write text
       igset txal 10                                                   | Left align text
       arrow 84. 82.  27000. 27000. -0.11                              | Draw arrow
       itx 82.  30000. 'SIEMENS 7880'                                  | Write text
       igset txal 20                                                   | Center text horizontally
       arrow 90. 84.  42000. 42000.  0.11                              | Draw arrow
       itx 87.  50000. 'SIEMENS 7890'                                  | Write text
       arrow 90. 85.  68000. 68000.  0.11                              | Draw arrow
       itx 87.5 72000. 'IBM 3090'                                      | Write text
       arrow 90. 88.  100000. 100000.  0.11                            | Draw arrow
       itx 89. 110000. 'CRAY'                                          | Write text
 
       arise=$sigma(int((exp(f1(2))-1)*100+0.5))//'% per Annum rise'   | Get slope of annual increase from fit 1
       xhand=68.                                                       | X coordinate for hand and text
       yhand=$sigma(exp(f1(1)+f1(2)*&lsqb;xhand&rsqb;))                          | Calcualte y coordinate from fit 1
       EXEC DRAW X=&lsqb;xhand&rsqb; Y=&lsqb;yhand&rsqb; TEXT=&lsqb;arise&rsqb;                      | Draw the hand and text
       arise=$sigma(int((exp(f2(2))-1)*100+0.5))//'% per Annum rise'   | Get slope of annual increase from fit 2
       xhand=84.                                                       | X coordinate for hand and text
       yhand=$sigma(exp(f2(1)+f2(2)*&lsqb;xhand&rsqb;))                          | Calcualte y coordinate from fit 2
       EXEC DRAW X=&lsqb;xhand&rsqb; Y=&lsqb;yhand&rsqb; TEXT=&lsqb;arise&rsqb;                      | Draw the hand and text
       atitle 'Year ' 'IBM 168 Units used '                            | Add axis title to picture
       RETURN
 
       MACRO DRAW
       igset TXAL 35                                                   | Right horizontally and bottom vertically
       igset TANG -35.                                                 | Text angle
       igset TXFP -140                                                 | Zapfdinbats font
       igset CHHE  0.50                                                | Character height
       itx $SIGMA(&lsqb;X&rsqb;-0.9) &lsqb;Y&rsqb; +                                       | A hand in the font ZapfDingbats
       igset TXAL 30                                                   | right align text
       igset TANG  0.                                                  | Text angle
       igset TXFP -30                                                  | Font for accompanying text
       igset CHHE  0.22                                                | Character height
       y = y * 1.70                                                    | Start text somewhat above hand
       itx &lsqb;X&rsqb; &lsqb;Y&rsqb; &lsqb;TEXT&rsqb;                                              | The text to be written
       RETURN
  PAW > <HP3>EXEC COMPTIME</HP3>                                         | Execute macro for computer time
</XMP>
<FIGSEG>
<ARTWORK NAME=TUTEX27 ALIGN=CENTER WIDTH=17CM TOPMAR=5MM BOTMAR=5MM>
</FIG>
<FIG ID=TUTEX30 frame=box>
<FIGCAP>Making slides with PAW using PostScript
<FIGSEG>
<I1>slides
<XMP SCALE=0.75>
  PAW > **************************************************************************
  PAW > *                      TUTORIAL EXAMPLE PAWEX30                          *
  PAW > * Making slides with PAW and PostScript                                  *
  PAW > **************************************************************************
  PAW > <HP3>edit slide</HP3>                                       | Look at master macro to produce slide
       macro SLIDE xsize=18 ysize=22 width=0.4 name='Author/CERN  CONF99' sn=' ' title=' '
       **************************************************************************
       *                       PAW TUTORIAL EXAMPLE 30 - SLIDE                  *
       * General macro to draw contours of SLIDE                                *
       **************************************************************************
       xmax = &lsqb;xsize&rsqb;-&lsqb;width&rsqb;                                     | X range for slide
       ymax = &lsqb;ysize&rsqb;-&lsqb;width&rsqb;                                     | Y range for slide
       size &lsqb;xsize&rsqb; &lsqb;ysize&rsqb;                                       | Total size for slide
       next                                                       | Initialize next frame
       igset lwid 2                                               | Double line width
       pave 0 &lsqb;xmax&rsqb; 0 &lsqb;ymax&rsqb; &lsqb;width&rsqb; 0 1005 tr                   | Draw a shaded box around the picture
       igset lwid 1                                               | Single line width
       xtitle = $sigma((&lsqb;xsize&rsqb;-0.2)/2.)                          | X coordinate for title
       ytitle = &lsqb;ysize&rsqb;-1.5                                       | Y coordinate for title
       igset txfp -70                                             | Defined new font (Helvetica-bold-oblique)
       igset txal 20                                              | Text alignment Hor-Centered / Vert-Base
       igset chhe 0.6                                             | Set character height
       itx &lsqb;xtitle&rsqb; &lsqb;ytitle&rsqb; &lsqb;title&rsqb;                              | Write text (title)
       igset chhe 0.3                                             | Set character height
       igset txal 10                                              | Text alignment Hor-Left / Vert-Base
       xtext = &lsqb;xmax&rsqb;-0.2                                         | X coordinate for name
       ytext = 0.1                                                | Y coordinate for name
       igset txfp -1042                                           | Defined new font (Helvetica-bold-oblique)
       igset chhe 0.2                                             | Set character height
       igset txal 30                                              | Text alignment Hor-Right / Vert-Base
       itx &lsqb;xtext&rsqb; &lsqb;ytext&rsqb; &lsqb;name&rsqb;                                 | Write text (name)
       igset txal 10                                              | Text alignment Hor-Left / Vert-Base
       itx 0.1 0.1 &lsqb;sn&rsqb;                                           | Write text (slide name)
       igset chhe 0.3                                             | Set character height
       igset lwid 2                                               | Double line width
       return
  PAW > <HP3>edit discomp</HP3>                                       | Look at example macro showing use of slide
       MACRO DISCOMP
       **************************************************************************
       *                       PAW TUTORIAL EXAMPLE 30 - DISCOMP                *
       * Text for slide example DISCOMP                                         *
       **************************************************************************
       exec slide sn='DisComp' title='Distributed Computing'      | Define the outline of the slide
       igset txfp mainfont                                        | Defined font via alias
       igset chhe 0.5                                             | set character height
       itx 2 17 'With a distributed operating system (not yet !)' | Write text
       itx 2 15 'With tools on top (RPCs, NCS,.. ?)'              | Write text
       igset chhe 0.4                                             | Set character height
       itx 3 14 Tmess                                             | Write text
       itx 3 13 Tfork                                             | Write text
       itx 3 12 Tdata                                             | Write text
       itx 3 11 Tcomp                                             | Write text
       igset txfp -70                                             | Defined new font (Helvetica-bold-oblique)
       itx 5 14 'Time to send message to remote process'          | Write text
       itx 5 13 'Time to fork a process'                          | Write text
       itx 5 12 'Time to pass data (in and out)'                  | Write text
       itx 5 11 'Time used for computation on remote process'     | Write text
       igset txfp mainfont                                        | Defined font via alias
       pave 2 16 2 9 0.3 0 1001 trs                               | Draw 'pave' (shaded box)
       igset txal 33                                              | Text alignment Hor-Right / Vert-Centered
       itx 6 7 'Efficiency ='                                     | Write text
       igset txal 20                                              | Text alignment Hor-Centered / Vert-Base
       line 6.1 7 14.1 7                                          | Draw line
       itx 10 7.2 Tcomp                                           | Write text
       itx 10 6.3 'Tcomp + Tmess + Tfork + Tdata'                 | Write text
       igset txfp -240                                            | Defined new font (ZapfDingbats-bold)
       igset chhe 0.6                                             | Set character height
       igset txal 30                                              | Text alignment Hor-Right / Vert-Base
       itx 1.5 17 P                                               | Write text
       itx 1.5 15 P                                               | Write text
       igset chhe 0.3                                             | Set character height
       igset txal 20                                              | Text alignment Hor-Centered / Vert-Base
       igset txfp -70                                             | Defined new font (Helvetica-bold-oblique)
       itx 9 4 'Many time consuming applications today have:'     | Write textOn apollo execute
       itx 9 3 'Efficiency > 0.9'                                 | Write text
       return
  PAW > * Define alias defining main text fonr and precision (PostScript HELVETICA BOLD) for the slide text
  PAW > <HP3>alias/create mainfont -60</HP3>                                  | Create alias
  PAW > * Define alias to print PostScript metafile (See <HDREF REFID=H3PICT> and following, where macro POST is described)
  PAW > <HP3>alias/create @ 'exec post'</HP3>                                 | Create alias
  PAW > <HP3>opt zfl1</HP3>                                                   | Keep last picture in memory
  PAW > <HP3>exec discomp</HP3>                                               | Exec the slide macro containing the slide
  PAW > <HP3>@</HP3>                                                          | Print generated slide
  PAW > <HP3>alias/delete *</HP3>                                             | Delete Alias definition
</XMP>
<FIGSEG>
<ARTWORK NAME=TUTEX30 ALIGN=CENTER WIDTH=16.5CM>
</FIG>
