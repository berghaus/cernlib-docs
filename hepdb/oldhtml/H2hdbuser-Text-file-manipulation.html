<TITLE>HEPDB -- H2hdbuser-Text-file-manipulation </TITLE>
<P>
<H2><A NAME=H2hdbuser-Text-file-manipulation.html>Text file manipulation</A></H2>
<P>
<H3>Enter or retrieve a text file</H3>
<P>
<PRE>
           +--------------------------------------------------+
           |CALL <A NAME=CDTEXT> CDTEXT</A> (LUN,CHFILE,CHPATH,LBANK*,CHOPT,IRC*) |
           +--------------------------------------------------+
                                  </PRE>
<P>
<DL>
<DT><TT>LUN</TT></DT><DD>Fortran logical unit on which the file should be
read or written
<DT><TT>CHFILE</TT></DT><DD>Character variable giving the file name
<DT><TT>CHPATH</TT></DT><DD>Character string specifying the path name
<DT><TT>LBANK</TT></DT><DD>Address of data bank (option <A NAME=R144> R</A>)
<DT><TT>CHOPT</TT></DT><DD>Character string with any of the following
characters
<DL>
<DT><TT>'A'</TT></DT><DD>File on unit <A NAME=LUN145> LUN</A> is already open
<DT><TT>'R'</TT></DT><DD>Read the text file from disk and convert to a
bank at <A NAME=LBANK146> LBANK</A>
<DT><TT>'P'</TT></DT><DD>Print the text from the bank at <A NAME=LBANK147> LBANK</A>
<DT><TT>'W'</TT></DT><DD>Write the text from the bank at <A NAME=LBANK148> LBANK</A> to the file
<A NAME=CHFILE149> CHFILE</A>
</DL>
<DT><TT>IRC</TT></DT><DD>Integer return code
<DL>
<DT><TT> 0</TT></DT><DD>Normal completion
<DT><TT>66</TT></DT><DD>Illegal logical unit number
<DT><TT>67</TT></DT><DD>Array too long; no space in buffer
</DL>
</DL>
<P>
Subroutine <A HREF=H2hdbuser-Text-file-manipulation.html#CDTEXT NAME=CDTEXT150> CDTEXT</A> can be used to read a text file from disk and convert it
into a bank for insertion into the database with <A HREF=H2hdbuser-Storing-information-in-the-database.html#CDSTOR NAME=CDSTOR151> CDSTOR</A>, or to write a
file from information in an existing bank. Alternatively, the information
from the bank may be printed in character format.
<P>
<H3>Copy character data to or from a bank</H3>
<P>
<PRE>
       +----------------------------------------------------------+
       | CALL <A NAME=CDCHAR> CDCHAR</A> (CHTEXT,NTEXT,LTEXT,CHPATH,LBANK,CHOPT,IRC*) |
       +----------------------------------------------------------+
                                  </PRE>
<P>
<DL>
<DT><TT>CHTEXT</TT></DT><DD>Character array of length <A NAME=NTEXT152> NTEXT</A> in which the
text is written (option <A NAME=R154> R</A>)
<DT><TT>NTEXT</TT></DT><DD>Length of array <A NAME=CHTEXT155> CHTEXT</A>
<DT><TT>LTEXT</TT></DT><DD>Maximum number of characters per element of
<A NAME=CHTEXT156> CHTEXT</A>
<DT><TT>CHPATH</TT></DT><DD>Character string specifying the path name
<DT><TT>LBANK</TT></DT><DD>Address of Keys bank <TT>KYDB</TT> (with option
<A NAME=C157> C</A>)
<DT><TT>CHOPT</TT></DT><DD>Character string with any of the following
characters
<DL>
<DT><TT>'R'</TT></DT><DD>Read the text file from disk and convert to a
bank at <A NAME=LBANK158> LBANK</A>
<DT><TT>'P'</TT></DT><DD>Print the text from the bank at <A NAME=LBANK159> LBANK</A>
<DT><TT>'W'</TT></DT><DD>Write the text from the bank at <A NAME=LBANK160> LBANK</A> to the file
<A NAME=CHFILE161> CHFILE</A>
</DL>
<DT><TT>IRC</TT></DT><DD>Integer return code
<DL>
<DT><TT> 0</TT></DT><DD>Normal completion
<DT><TT>61</TT></DT><DD>Too many keys
<DT><TT>66</TT></DT><DD>Illegal logical unit number
<DT><TT>67</TT></DT><DD>File too long; no space in buffer
</DL>
</DL>
<P>
Subroutine <A HREF=H2hdbuser-Text-file-manipulation.html#CDCHAR NAME=CDCHAR162> CDCHAR</A> is functionally similar to <A HREF=H2hdbuser-Text-file-manipulation.html#CDTEXT NAME=CDTEXT163> CDTEXT</A>, but reads or writes
the text from the array <A NAME=CHTEXT164> CHTEXT</A>.
