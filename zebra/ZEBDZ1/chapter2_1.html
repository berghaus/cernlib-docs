<HEAD>
<TITLE> DZ: The debug and dump package</TITLE>
</HEAD>
<BODY><P>
 <HR> <A NAME=tex2html82 HREF=tex2htmlindex2_2.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/next_motif.gif"></A> <A NAME=tex2html80 HREF=ZEBDZ1.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/up_motif.gif"></A> <A NAME=tex2html74 HREF=ZEBDZ1.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/previous_motif.gif"></A>  <A NAME=tex2html84 HREF=tex2htmlindex2_2.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/index_motif.gif"></A><BR>
<B> Next:</B> <A NAME=tex2html83 HREF=tex2htmlindex2_2.html>Index</A>
<B>Up:</B> <A NAME=tex2html81 HREF=ZEBDZ1.html>No Title</A>
<B> Previous:</B> <A NAME=tex2html75 HREF=ZEBDZ1.html>No Title</A>
<HR> <P>
<H1><A NAME=SECTION0010000000000000000> DZ: The debug and dump package</A></H1>
<P>
<A NAME=secdzdescription><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<H1><A NAME=SECTION0011000000000000000> Display routines</A></H1>
<P>
<H2><A NAME=SECTION0011100000000000000> Display of a bank or a data structure</A></H2>
<P>
<P><A NAME=DZSHOW>CALL DZSHOW (CHTEXT,IXSTOR,LBANK,CHOPT,ILNK1,ILNK2,IDAT1,IDAT2)</A><P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSHOW>DZSHOW</A> displays the contents of a bank or a data structure in a
store. The output format of the data part is controlled by the internal
or external I/O characteristic.
<A NAME=55><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=56><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=57><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=58><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<DL COMPACT>
<DT>CHTEXT
<DD>Character variable specifying the text to be printed
together with the display (truncated to 50 characters).
<DT>IXSTOR
<DD>Index of the store containing the bank or data structure.
<DT>LBANK
<DD>Address of bank or entry address to the data structure
which is to be displayed.
<DT>CHOPT
<DD>Character variable specifying option desired.
<DL COMPACT>
<DT>'B'
<DD>Print the single bank at <tt>LBANK</tt> (default).
<DT>'D'
<DD>Print the bank contents from top to bottom Downwards
with five elements per line.
<DT>'S'
<DD>Print the bank contents from left to right Sideways
with up to ten elements per line (default).
<DT>'L'
<DD>Print the linear structure supported by <tt>LBANK</tt>.
<DT>'V'
<DD>Print the vertical (down) structure supported by <tt>LBANK</tt>.
<DT>'Z'
<DD>Print the data part of each bank in hexadecimal format
(i.e. ignoring the I/O characteristic).
<A NAME=66><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
</DL><DT>ILNK1
<DD>Index of the first link in a bank which will be printed.
<DT>ILNK2
<DD>Index of the last link in a bank which will be printed.
<DT>IDAT1
<DD>Index of the first data word in a bank which will be printed.
<DT>IDAT2
<DD>Index of the last data word in a bank which will be printed.
</DL><b>Example of the use of <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSHOW>DZSHOW</A></b><PRE><TT>CALL DZSHOW ('Display banks',IXSTOR,LQMAIN,'BLV',3,7,0,0)</TT></PRE>
The complete 
<A NAME=70><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=71><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
structure supported by the bank
at address <tt>LQMAIN</tt> in  store <tt>IXSTOR</tt> is to
be displayed, i.e. both down and next links are to be followed.
<A NAME=74><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=75><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
Links 3 to 7 and all data words of each bank are to be printed.
<H2><A NAME=SECTION0011200000000000000> Notes:</A></H2>
<P>
<P><OL><LI> When <tt>ILNK2&lt;ILNK1</tt> (<tt>IDAT2&lt;IDAT1</tt>) no links (data) are output.
<LI> When <tt>ILNK2=ILNK1=0</tt> (<tt>IDAT2=IDAT1=0</tt>) all links (data) are
output.
<LI> When <tt>ILNKi</tt> or <tt>IDATi</tt> are outside bounds for a given bank, the
actual values for the bank in question are taken.
<LI> The explanation of the
first output line printed for each bank is given in section ``Bank information''
under the heading ``First line (General information)'' in the
description of routine <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSNAP>DZSNAP</A>.
</OL><P>
<PRE>


#
</PRE><P><H2><A NAME=SECTION0011300000000000000> Print the format of a bank</A></H2>
<P>
<P><A NAME=DZFORM>CALL DZFORM (IXSTOR,LBANK)</A><P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZFORM>DZFORM</A> prints the format of the data part of a bank.
It uses the I/O characteristic stored in the bank, decodes the
information and prints it in a format which is compatible with the
input of <A HREF=../../zebra/ZEBMZ1/chapter2_1.html#MZFORM>MZFORM</A>.
<A NAME=101><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=102><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<DL COMPACT>
<DT>IXSTOR
<DD>Index of the store where the bank resides.
<DT>LBANK
<DD>Print the I/O characteristic for the bank at address <tt>LBANK</tt>.
If <tt>LBANK = 0</tt> all I/O characteristics declared with
<A HREF=../../zebra/ZEBMZ1/chapter2_1.html#MZFORM>MZFORM</A> are printed
</DL><H2><A NAME=SECTION0011400000000000000> Display of a ZEBRA store</A></H2>
<P>
<P><A NAME=DZSTOR>CALL DZSTOR (CHTEXT,IXSTOR)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSTOR>DZSTOR</A> displays the structure of the ZEBRA store identified by
<tt>IXSTOR</tt>.
The routine outputs the parameters characterizing the store, followed by a
list of all divisions and all link areas associated with the store in
question.
<A NAME=114><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=115><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<DL COMPACT>
<DT>CHTEXT
<DD>Character variable specifying the text to be printed
together with the dump (truncated to 50 characters).
<DT>IXSTOR
<DD>Index of store to be displayed.
</DL>The store parameters give the store sequence number (identifier),
name and
absolute address, followed by the useful length, the number of fence,
structural, permanent and working space link words, the minimal and
actual number of words in the reserve area between divisions 1 and 2,
the minimal offset of the upper end of default division 2 and the
number of short term and long term user divisions.
<P>
<P>
<PRE>


#
</PRE><P><H2><A NAME=SECTION0011500000000000000> Display of a link area</A></H2>
<P>
<P><A NAME=DZAREA>CALL DZAREA (CHTEXT,IXSTOR,CHLA,LLA,CHOPT)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZAREA>DZAREA</A> displays the contents of a ZEBRA link area.
<A NAME=128><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=129><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<DL COMPACT>
<DT>CHTEXT
<DD>Character variable with text to be printed with the
dump (truncated to 50 characters).
<DT>IXSTOR
<DD>Index of store to which link area is associated.
<DT>CHLA
<DD>Character variable specifying the name of the link area to be mapped.
If <tt>CHLA=' '</tt> all link areas associated with the store are printed
('N' option only)
<DT>LLA
<DD>One of the links of the link area to be printed ('A' option only)
<DT>CHOPT
<DD>Character variable specifying option desired
<DL COMPACT>
<DT>'A'
<DD>Use the link parameter <tt>LLA</tt> to identify the link area (default)
<DT>'N'
<DD>Use the name parameter <tt>CHLA</tt> to identify the link area
</DL></DL><b>Example of use of <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZAREA>DZAREA</A></b><PRE><TT>CALL DZAREA ('Display of link area TRACK',IXCOMM,'TRACK',0,'N')</TT></PRE>
A list of the addresses in the link area <tt>TRACK</tt> associated
with store <tt>IXCOMM</tt> will be given.
<P>
<H2><A NAME=SECTION0011600000000000000> Survey of a ZEBRA data structure</A></H2>
<P>
<P><A NAME=DZSURV>CALL DZSURV (CHTEXT,IXSTOR,LBANK)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSURV>DZSURV</A> displays the survey of a ZEBRA data structure.
All horizontal (NEXT) as well as all vertical (DOWN) structural
<A NAME=146><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
links of a ZEBRA (sub)structure are followed.
Illegal structural links cause transfer to <A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZFATAL>ZFATAL</A>.
<A NAME=148><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<DL COMPACT>
<DT>CHTEXT
<DD>Character variable specifying the text to be printed
together with the dump (truncated to 50 characters).
<DT>IXSTOR
<DD>Index of store where the data structure resides.
<DT>LBANK
<DD>Address of the bank supporting the data (sub)structure for which
the survey is desired.
</DL>If the structure is legal, printed output is produced.
Each line contains the following information:
<P>
<PRE>


#
</PRE><P><b>Example of the use of <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSURV>DZSURV</A></b><PRE><TT>CALL DZSURV ('Summary of the EV data structure',IXSTOR,LEV)</TT></PRE>
<b>Output generated by <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSURV>DZSURV</A></b><PRE><TT>DZSURV --- Survey of the EV data structure  ST= MainStor  LSTART=     9069
                                                                                                                                 
  NWCUM     NW   WBK  NBK    IDENTIFIER(S)                                                                                       
                                                                                                                                 
     27     27    27    1     EV                                                                                                 
     96     69    23    3       -1 VX                                                                                            
    250    154    22    7            -1 TK                                                                                       

DZSURV --- Structure supported by bank EV at 9069 in store MainStor occupies 250 words in 11 banks</TT></PRE>
<P>
In the output above the headings have the following meaning:
<DL COMPACT>
<DT>NWCUM
<DD>Cumulated <tt>NW</tt> to allow easy calculation of
the memory occupancy of the sub-structures
<DT>NW
<DD>Total number of words occupied by these <tt>NBK</tt> banks,
including system words.
<DT>WBK
<DD>Words per bank (if the <tt>NBK</tt> banks are not all
of the same length, the longest is given).
<DT>NBK
<DD>Number of banks on this level
<DT>IDENTIFIER
<DD>Name(s) of the banks at this level
Several names are given if all names
in a linear structure are not identical
</DL>In this example
the supporting bank <tt>LEV</tt> is in common <tt>//</tt> at address
<tt>9580</tt> pointed to by the link <tt>LEV</tt>.
It supports a linear structure of 3 <tt>VX</tt> banks via link <tt>-7</tt>.
The <tt>VX</tt> banks all
have a length of <tt>23</tt> words, and thus occupy <tt>69</tt> words of storage.
Each <tt>VX</tt> bank supports a linear chain of
<tt>TK</tt> banks via link <tt>-1</tt>.
There are <tt>7</tt> <tt>TK</tt> banks in memory, all of <tt>25</tt> words
(i.e. they occupy <tt>25x7=175</tt> words).
The total structure contains 11 banks and occupies <tt>271</tt> words.
<P>
<H1><A NAME=SECTION0012000000000000000> Map and checks on the division level</A></H1>
<P>
<H2><A NAME=SECTION0012100000000000000> Snap of one or more divisions</A></H2>
<P>
<A NAME=secDZSNAP><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<P><A NAME=DZSNAP>CALL DZSNAP (CHTEXT,IXDIV,CHOPT)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSNAP>DZSNAP</A> provides a snapshot of one or more divisions in a ZEBRA
store. The kind of information provided is controlled by <tt>CHOPT</tt>.
<A NAME=187><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<DL COMPACT>
<DT>CHTEXT
<DD> Character variable specifying the title to be printed
      (truncated to 50 characters).
<DT>IXDIV
<DD>  Index of the division(s) to be snapped.
      With function <A HREF=../../zebra/ZEBMZ1/chapter2_1.html#MZIXCO>MZIXCO</A> several divisions can be combined.
      If no explicit division identifiers are specified
      all user divisions are snapped.
<DT>CHOPT
<DD>Character variable specifying the snap options desired.
<DL COMPACT>
<DT>'C' ritical
<DD>Dump any active bank with status bit <tt>IQCRIT</tt> set;
bit <tt>IQCRIT</tt> will be reset to zero in each bank
(option <tt>C</tt> is implied by option <tt>T</tt>)
<DT>'D' ump
<DD>Dump any active bank with status bit <tt>IQMARK</tt> set;
bit <tt>IQMARK</tt> will be reset to zero in each bank
<DT>'E' xtend
<DD>Extend map entry to dump all links of each bank
(otherwise only as many links as will fit on a line)
<DT>'F' ull
<DD>Dump all active banks, links and data
<DT>'K' ill
<DD>Dropped banks to be treated as active
(dropped banks are not normally dumped under <tt>D</tt> or <tt>F</tt> option)
<DT>'L' ink
<DD>Dump all link areas associated with the store
<DT>'M' ap
<DD>Print map entry for each bank
<DT>'T' erminal
<DD>Terminal type dump, used for the post-mortem dump
mainly to mark ``critical'' directly accessible banks
<DT>'W' ork
<DD>Dump the working space, links and data
<DT>'Z'
<DD>Dump the information in hexadecimal.
</DL></DL><H3><A NAME=SECTION0012110000000000000> Store information</A></H3>
<P>
The first part of the output of <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSNAP>DZSNAP</A> refers to the store,
and contains the following information:
<DL COMPACT>
<DT>NAME
<DD>Name of the store
<DT>lQSTOR
<DD>Absolute address <tt>-1</tt> of the store
<DT>NQSTRU
<DD>Number of structural links at the beginning of the store
<DT>NQREF
<DD>Number of permanent links at the beginning of the store
<DT>NQLINK
<DD>Number of permanent + working space links
<DT>NQMINR
<DD>Minimum size of the reserve area between divisions 1 and 2
<DT>LQ2END
<DD>Lower limit for the upper and of division 2
<DT>JQDVLL
<DD>Index of the most recent short-range divisions
<DT>JQDVSY
<DD>Index of the system division
<DT>NQFEND
<DD>Number of fence words
<DT>LOW-1/N
<DD>Start and end address of division 1
<DT>HIGH-1/N
<DD>Start and end address of division 2
<DT>SYST-1/N
<DD>Start and end address of the system division
<DT>END
<DD>Address of the last user word in the store
</DL><H3><A NAME=SECTION0012120000000000000> Bank information</A></H3>
<P>
A map output in <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSNAP>DZSNAP</A> (selected by the option letter <tt>M</tt>)
<A NAME=212><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
gives a comprehensive overview of all banks in
the one or more divisions in a ZEBRA dynamic store.
One or two (MAP-)line(s) are printed per bank.
They contain the following information:
<P>
<H3><A NAME=SECTION0012130000000000000> First line (General information)</A></H3>
<P>
<P>
<PRE>


 -- The cumulative number of words occupied by all banks so far

 -- The total number of words occupied by all banks at this level
 -- The length of the longest bank at this level
 -- The number of banks at this level (any identifier)

 -- Structural relation
 -- Bank identifier(s)
</PRE><P><H3><A NAME=SECTION0012140000000000000> Second line (Links) (present only when there are non-zero links)</A></H3>
<P>
<P>
<PRE>


 1  The 4 character Hollerith bank identifier preceded by a ( if the bank

    has been dropped.
 2  The bank numeric identifier
 3  The address of the bank (status word) relative to the beginning of the
    store and as an absolute address (in octal or hexadecimal)
 4  The contents of the system and user part of the status word of the of
    the bank (bits 19-32 and 1-18) and of its I/O characteristic.

 5  Number of links (NL)/ of structural links (NS)/ of data words (ND)
 6  The contents of the next (N)/up (U)/and origin (O) links of the bank,
    as well as of the contents of the address pointed to by the origin
    link (@O), which should contain the address of the bank itself (hence
    allowing an easy cross-check). When an inconsistency is detected the
    faulty address is preceded by a minus sign (-).
</PRE><P>Normally, the map is at the same time a printout of the more
interesting links in the banks.
However, banks may have more than the <tt>N2</tt> links, the maximum printed in the map.
If it is desired to print all the links,
the option letter <tt>E</tt> should be given and
then an internal  call to <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSHOW>DZSHOW</A> is generated.
<P>
To avoid confusion about the format of a data word,
an extra symbol may be printed on its left:
<DL COMPACT>
<DT>O
<DD>for octal
<DT>Z
<DD>for hexadecimal,
<DT>&quot;
<DD>for BCD.
</DL><P>
<PRE>


 1  a two character flag:

    **the bank is dropped (also signaled by a left parenthesis '(' on the
      first line)
    . the bank is active, all non-zero links are printed
    + the bank is active, not all non-zero links are printed
    F in position 2 flags a bank with potentially dangerous contents in
      the links printed. This could be either:

              --  illegal link content
              --  dropped bank supporting an active bank (not via NX link)
              --  active bank pointing to a dropped bank
 2  links 1,2....N are printed in this order with N the smaller of the the
    following 2 numbers:

    N1the last non-zero link of this bank;
    N2the number of links which can be printed on one line (typically 9)
    If the link points to a correct bank-address, the ID of that bank is
    also printed, preceded by ( if this bank has been dropped. If the link
    does not point to a status word, then a - or **** is printed against
    it for legal or illegal link content.
</PRE><P><H2><A NAME=SECTION0012200000000000000> Verify one or more ZEBRA divisions</A></H2>
<P>
<P><A NAME=DZVERI>CALL DZVERI (CHTEXT,IXDIV,CHOPT)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZVERI>DZVERI</A> checks the structure of one or more divisions in a ZEBRA store. 
The verification detail depends on the settings in <tt>CHOPT</tt>.
<A NAME=263><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<DL COMPACT>
<DT>CHTEXT
<DD>Character variable specifying the text to be printed
together with the verification (truncated to 50 characters).<BR><tt>CHTEXT=' '</tt>: No message is output unless an error is detected.
In the latter case a message detailing the problem is
<b>always</b> output, irrespective of <tt>CHTEXT</tt>.
<DT>IXDIV
<DD>Index of the division(s) to be verified.
For a combination of divisions the MZ function <A HREF=../../zebra/ZEBMZ1/chapter2_1.html#MZIXCO>MZIXCO</A> should
be used.<BR>If no explicit division identifiers are specified
all user divisions are verified.
<DT>CHOPT
<DD>Character variable specifying level of checks desired.
<DL COMPACT>
<DT>'C'
<DD>Check chaining of banks only (default)
<DT>'F'
<DD>Errors are considered fatal and generate a call to <A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZFATAL>ZFATAL</A>
<DT>'L'
<DD>Check validity of the structural links in the banks
<A NAME=273><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
(implies <tt>C</tt>)
<DT>'S'
<DD>Check the store parameters
<DT>'U'
<DD>Check the validity of the up and origin links in the banks
<A NAME=275><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=276><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
(implies <tt>C</tt>)
</DL></DL>When an error is detected the variable <tt><tt>IQUEST</tt><A NAME=447><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=448><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=449><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=450><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>(1)</tt> in common <tt>/<tt>QUEST</tt><A NAME=457><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=458><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=459><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=460><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>/</tt>
will be non zero. When everything is correct it will contain zero.
<P>
<b>Example of the use of <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSTOR>DZSTOR</A> to check store parameters</b><PRE><TT>CALL DZVERI('Check store layout',IXSTOR,'S')</TT></PRE>
The previous example only checks the store parameters for store <tt>IXSTOR</tt>.
<b>Example of the use of <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZSTOR>DZSTOR</A> to make a complete check</b><PRE><TT>CALL DZVERI('Check everything',IXDIVI,'CFLSU')</TT></PRE>
This example checks the store parameters of the store containing
the divisions <tt>IXDIVI</tt>,
verifies the chaining of the banks and the correctness of all
links (structural, next, up and origin links). When an error is
<A NAME=286><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=287><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=288><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<A NAME=289><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
detected an exit is forced via <A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZFATAL>ZFATAL</A>.
<P>
It should be noted that in the MZ package, developped by J.Zoll, a routine
<A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZVERIF>ZVERIF</A>, with a functionality similar to <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZVERI>DZVERI</A> is available. 
This routine has two somewhat different modes of operation:
one in which all data in and relevant to a complete
store are checked and a call to <A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZFATAL>ZFATAL</A> is generated if it finds trouble,
and a second one in which, in case of trouble, control is returned to the user,
who can find information about the error condition in the communication vector
<tt>IQUEST</tt><A NAME=467><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=468><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=469><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=470><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>.
<P>
<A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZVERIF>ZVERIF</A> is used by the automatic verification procedure
<A HREF=../../zebra/ZEBMZ3/chapter2_1.html#ZVAUTO>ZVAUTO</A>, see the MZ Reference Guide for more details.
<P>
<H3><A NAME=SECTION0012210000000000000> DZVERI error return codes</A></H3>
<P>
When <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZVERI>DZVERI</A> detects an error it fills the
<tt>IQUEST</tt><A NAME=477><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=478><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=479><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=480><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A> vector as follows:
<DL COMPACT>
<DT>IQUEST(11)
<DD><tt>JQSTOR</tt>, the store identifier
<DT>IQUEST(12)
<DD><tt>JQDIVI</tt>, the division identifier
<P><DT> --  'C' option only - For each faulty bank
<DD>
<P><DT>IQUEST(13)
<DD><tt>LN</tt>, its start address
<DT>IQUEST(14)
<DD><tt>IQLS</tt>, its status word
<DT>IQUEST(15)
<DD><tt>IQNL</tt>, its total number of links
<DT>IQUEST(16)
<DD><tt>IQNS</tt>, its number of structural links
<DT>IQUEST(17)
<DD><tt>IQNS</tt>, its number of data words
<P><DT> -- 'L' option only (check structural links in banks)
<DD>
<P><DT>IQUEST(18)
<DD><tt>L</tt>, the address of the link being verified
<DT>IQUEST(19)
<DD><tt>LQ(L)</tt>, its contents
<P><DT> -- 'U' option only (check origin and up links in banks)
<DD>
<P><DT>IQUEST(20)
<DD><tt>LUP</tt>, the value of the <b>up</b> link
<DT>IQUEST(21)
<DD><tt>LORIG</tt>, the value of the <b>origin</b> link
</DL>
<H1><A NAME=SECTION0013000000000000000> Monitor changes inside a ZEBRA store or bank.</A></H1>
<P>
<H2><A NAME=SECTION0013100000000000000> Calculate the checksum of a vector in a ZEBRA store</A></H2>
<P>
<P><A NAME=DZCHVC>CALL DZCHVC (CHTEXT,IXSTOR,LBEGIN,LEND,CHOPT,*ISUM*)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHVC>DZCHVC</A> calculates the checksum of the vector (interval)
<tt>[LBEGIN,LEND]</tt>
in a given ZEBRA store and returns the checksum result in a 2-word
user vector.
<A NAME=325><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<P><B>Input parameter description:</B><P><DL COMPACT>
<DT>CHTEXT
<DD>Character variable specifying the text to be printed
(truncated to 50 characters).
<DT>IXSTOR
<DD>Index of the store where the checksum has to be calculated.
<DT>LBEGIN
<DD>First word of the interval for which the checksum
has to be calculated
which is to be displayed.
<DT>LEND
<DD>Last word of the interval for which the checksum
has to be calculated
<DT>CHOPT
<DD>Character variable specifying option desired.
<DL COMPACT>
<DT>'C'
<DD>Calculate the checksum for the desired interval (default)
<DT>'V'
<DD>Verify - Compare the newly calculated value of the checksum with the
one given on input in the array <tt>ISUM</tt>
</DL><DT>*ISUM*
<DD><tt>V</tt> option only - Two word integer array containing the
checksum calculated by a previous call to <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHVC>DZCHVC</A>. This value has to be
compared with the newly calculated checksum for the given interval.
</DL><P><B>Output parameter description:</B><P><DL COMPACT>
<DT>*ISUM*
<DD>Two word integer array containing the calculated checksum.
This vector can be used as input to a subsequent call to
<A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHVC>DZCHVC</A> for the same interval or can be tested for modifications by the
user himself.
</DL>When the <tt>V</tt> option is set and a difference is detected between the
input and output values of <tt>ISUM</tt>, then a non-zero value will be
returned in <tt><tt>IQUEST</tt><A NAME=487><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=488><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=489><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=490><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>(1)</tt>, otherwise <tt><tt>IQUEST</tt><A NAME=497><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=498><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=499><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=500><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>(1)</tt> will be zero.
<P>
<H3><A NAME=SECTION0013110000000000000> Important remark</A></H3>
<P>
Since the checksum algorithm
sums the contents of the vector <tt>[LBEGIN,LEND]</tt>
bit by bit, not all possible changes can be detected (e.g. inversions
in the sequence of the elements will go undetected).
<P>
<H2><A NAME=SECTION0013200000000000000> Monitor changes in a ZEBRA bank</A></H2>
<P>
<P><A NAME=DZCHST>CALL DZCHST (CHTEXT,IXSTOR,LBANK,CHOPT,*ISUM*)</A><P>
<P>
<P><B>Action: </B><P><A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHST>DZCHST</A> monitors changes in the banks of ZEBRA data structure.
It uses routine <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHVC>DZCHVC</A>.
The data, system and link part of the banks are monitored separately.
<A NAME=350><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<P>
<P><B>Input parameter description:</B><P><DL COMPACT>
<DT>CHTEXT
<DD>Character variable specifying the text to be printed
(truncated to 20 characters).
<DT>IXSTOR
<DD>Index of the store where the bank to be monitored resides.
<DT>LBANK
<DD>Address of the bank to be monitored.
<DT>CHOPT
<DD>Character variable specifying option desired.
<DL COMPACT>
<DT>'B'
<DD>Bank - Consider the checksum of the single bank at <tt>LBANK</tt> (default)
<DT>'C'
<DD>Calculate the checksum for the desired banks(s) (default)
 checksum for the desired bank parts
<DT>'D'
<DD>Consider the checksum of the
structure supported by <tt>LBANK</tt>, but do not follow the next link.
<A NAME=357><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<DT>'L'
<DD>Consider the checksum of the
structure supported by <tt>LBANK</tt>, also following the next link.
<A NAME=359><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>
<DT>'V'
<DD>Verify - Compare the newly calculated value of the checksums with the
ones given on input in the array <tt>ISUM</tt>.
</DL><DT>*ISUM*
<DD><tt>V</tt> option only - Six word integer array containing the
checksums calculated by a previous call to <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHST>DZCHST</A>. These values have to
be compared with the newly calculated checksums for the different
parts of the bank(s) in the data structure.
</DL><P><B>Output parameter description:</B><P><DL COMPACT>
<DT>*ISUM*
<DD>Six word integer array containing the calculated
checksums for the different parts of the bank as follows:
<DL COMPACT>
<DT>1-2
<DD>Checksum of the <b>data</b> part
<DT>3-4
<DD>Checksum of the <b>link</b> part
<DT>5-6
<DD>Checksum of the <b>system</b> part
</DL>This array should be used as input to a subsequent call to <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHST>DZCHST</A>
for the same bank or can be tested for modifications by the
user himself.
</DL>When the <tt>V</tt>erify option is active and a difference is detected
then the variable <tt><tt>IQUEST</tt><A NAME=507><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=508><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=509><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=510><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>(1)</tt> in common <tt>/<tt>QUEST</tt><A NAME=517><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=518><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=519><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=520><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A>/</tt>
will be non zero. When everything is correct it will contain zero.
<P>
<H3><A NAME=SECTION0013210000000000000> DZCHST Error return codes</A></H3>
<P>
When <A HREF=../../zebra/ZEBDZ1/chapter2_1.html#DZCHST>DZCHST</A> detects an error then it fills the <tt><tt>IQUEST</tt><A NAME=527><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=528><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=529><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A><A NAME=530><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/invis_anchor.xbm"></A></tt> vector as follows:
<DL COMPACT>
<DT>IQUEST(11)
<DD><tt>0</tt> : Data part OK. <tt>1</tt> : Data part faulty
<DT>IQUEST(12)
<DD><tt>0</tt> : Link part OK. <tt>1</tt> : Link part faulty
<DT>IQUEST(13)
<DD><tt>0</tt> : System part OK. <tt>1</tt> : System part faulty
</DL> <H2>References</H2>
<P><A NAME=BIBLIO HREF=../../general/biblio/bibliography.html>Global CERN library references</A><P>/user/goossens/cnasall/cnasbibl,/user/goossens/cnasall/textproc}    
<HR> <A NAME=tex2html82 HREF=tex2htmlindex2_2.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/next_motif.gif"></A> <A NAME=tex2html80 HREF=ZEBDZ1.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/up_motif.gif"></A> <A NAME=tex2html74 HREF=ZEBDZ1.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/previous_motif.gif"></A>  <A NAME=tex2html84 HREF=tex2htmlindex2_2.html><IMG ALIGN=MIDDLE SRC="http://asis01.cern.ch/CN/CERNTEX/icons/index_motif.gif"></A><BR>
<B> Next:</B> <A NAME=tex2html83 HREF=tex2htmlindex2_2.html>Index</A>
<B>Up:</B> <A NAME=tex2html81 HREF=ZEBDZ1.html>No Title</A>
<B> Previous:</B> <A NAME=tex2html75 HREF=ZEBDZ1.html>No Title</A>
<HR> <P>
<HR>

</BODY>
<P><ADDRESS>
goossens@cern.ch
</ADDRESS>